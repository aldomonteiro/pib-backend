{"version":3,"sources":["../../../src/api/bot/actionsController.js"],"names":["QTY_1","sendActions","action","bot","sender","pageID","multiple","split","data","payload","location","out","Elements","startTyping","id","Bot","wait","stopTyping","send","fetchUser","user","recipient","phone","console","error","getFlavorsAndToppings","sizeID","flavorArray","flavorsWithPrice","Array","flavor","kind","pricing","price","toppings","toppingsNames","push","flavorsAndToppingsErr","inputCardapioReplyMsg","replyMsg","join","getOpenAndClose","weekDay","Date","getDay","openingTimes","openAndClose","isOpen","openTime","closeTime","mon_is_open","mon_open","mon_close","tue_is_open","tue_open","tue_close","wed_is_open","wed_open","wed_close","thu_is_open","thu_open","thu_close","fri_is_open","fri_open","fri_close","sat_is_open","sat_open","sat_close","sun_is_open","sun_open","sun_close","inputHorarioReplyMsg","strOpenTime","getHours","getMinutes","toString","padStart","strCloseTime"],"mappings":"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","sourcesContent":["import { getFlavors, getFlavorByName } from \"../controllers/flavorsController\";\nimport { getToppings, getToppingsNames } from \"../controllers/toppingsController\";\nimport { getOpeningTimes } from '../controllers/storesController';\nimport { getOnePricing } from '../controllers/pricingsController';\nimport { Bot, Elements } from 'facebook-messenger-bot';\nimport {\n    sendWelcomeMessage,\n    sendErrorMsg,\n    sendMainMenu,\n    sendCardapio,\n    askForPhone,\n    showPhone,\n    askToTypePhone,\n    askForQuantity,\n    askForQuantityMore,\n    showQuantity,\n    askForSize,\n    showSize,\n    askForFlavor,\n    showFlavor,\n    showOrderOrNextItem,\n    askForLocation,\n    confirmAddressOrAskLocation,\n    confirmLocationAddress,\n    showAddress,\n    confirmOrder,\n    askToTypeAddress,\n    confirmTypedText,\n    askForWantBeverage, askForBeverages, showBeverage, showNoBeverage,\n    sendHorario,\n    basicReply,\n    askForChangeOrder,\n    askForSplitFlavorOrConfirm,\n    askForFlavorOrConfirm,\n    askForSpecificItem,\n    updateItemAskOptions,\n    showOrderOrAskForPhone,\n    showSplit,\n    showFullOrder,\n    askForWantOrder\n} from './botController';\n\n\nconst QTY_1 = [1, \"um\", \"uma\"];\n\n\nexport const sendActions = async ({ action, bot, sender, pageID, multiple, split, data, payload, location }) => {\n    try {\n        let out = new Elements();\n        switch (action) {\n            case 'BASIC_REPLY':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await basicReply(data);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n            case 'SEND_WELCOME':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await sendWelcomeMessage(pageID, sender)\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n            case 'SEND_MAIN_MENU':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await sendMainMenu()\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n\n            case 'SEND_CARDAPIO':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await sendCardapio(pageID);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n            case 'ASK_FOR_ORDER':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askForWantOrder(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n            case 'LOCATION_CONFIRM_ADDRESS':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                const user = await bot.fetchUser(sender.id);\n                out = await confirmLocationAddress(recipient.id, sender.id, location, user);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n            case 'ASK_FOR_PHONE':\n                await bot.startTyping(sender.id);\n                await Bot.wait(800);\n                out = await askForPhone(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'SHOW_PHONE':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n\n                const phone = typeof data === 'undefined' ? payload : data;\n                out = await showPhone(pageID, sender.id, phone);\n\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'SHOW_ADDRESS':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await showAddress(pageID, sender.id, data);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'SHOW_ORDER_OR_ASK_FOR_PHONE':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await showOrderOrAskForPhone(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'ASK_TO_TYPE_PHONE':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askToTypePhone(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'ASK_FOR_LOCATION':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askForLocation();\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'ASK_TO_TYPE_ADDRESS':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askToTypeAddress(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'ASK_FOR_QUANTITY':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askForQuantity(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n            case 'ASK_FOR_FLAVOR':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askForFlavor(pageID, sender.id, multiple, split);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'SHOW_FLAVOR':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await showFlavor(pageID, sender.id, data);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n\n            case 'ASK_FOR_WANT_BEVERAGE':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askForWantBeverage(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n\n            case 'SHOW_NO_BEVERAGE':\n                await bot.startTyping(sender.id);\n                await Bot.wait(200);\n                out = await showNoBeverage(pageID, sender.id, data);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n            case 'ASK_FOR_BEVERAGE_OPTIONS':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await askForBeverages(pageID, sender.id, multiple);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n\n            case 'SHOW_BEVERAGE':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await showBeverage(pageID, sender.id, data);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n            case 'SHOW_FULL_ORDER':\n                // show summary\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await showFullOrder(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n                break;\n            case 'CONFIRM_ORDER':\n                await bot.startTyping(sender.id);\n                await Bot.wait(500);\n                out = await confirmOrder(pageID, sender.id);\n                await bot.stopTyping(sender.id);\n                await bot.send(sender.id, out);\n\n                break;\n            default:\n                break;\n        }\n    } catch (sendActionsErr) {\n        console.error(action, sendActionsErr);\n        throw sendActionsErr;\n    }\n}\n\n\n/**\n * Returns array of flavors. If sizeID was passed, only returns flavors with price.\n * @param {*} pageID \n * @param {*} sizeID \n */\nexport const getFlavorsAndToppings = async (pageID, sizeID) => {\n    try {\n        const flavorArray = await getFlavors(pageID);\n        const flavorsWithPrice = new Array();\n        for (let flavor of flavorArray) {\n            if (sizeID) {\n                const pricing = await getOnePricing(pageID, flavor.kind, sizeID);\n                if (pricing) {\n                    flavor.price = pricing.price;\n                }\n            }\n            if (sizeID) {\n                if (flavor.price) {\n                    flavor.toppingsNames = await getToppingsNames(flavor.toppings, pageID);\n                    flavorsWithPrice.push(flavor);\n                }\n            } else {\n                flavor.toppingsNames = await getToppingsNames(flavor.toppings, pageID);\n                flavorsWithPrice.push(flavor);\n            }\n        }\n        return flavorsWithPrice;\n    } catch (flavorsAndToppingsErr) {\n        console.error({ flavorsAndToppingsErr });\n    }\n}\n\nexport const inputCardapioReplyMsg = (flavorArray) => {\n    let replyMsg = '';\n    if (flavorArray) {\n        for (const flavor of flavorArray) {\n            replyMsg = replyMsg + '*' + flavor.flavor + '*' + '\\n';\n            replyMsg = replyMsg + flavor.toppingsNames.join();\n            replyMsg = replyMsg + '\\n';\n        }\n    }\n    return replyMsg;\n}\n\nexport const getOpenAndClose = async (pageID) => {\n    // TODO: timezone from the store\n    const weekDay = (new Date()).getDay();\n\n    const openingTimes = await getOpeningTimes(pageID);\n\n    if (openingTimes) {\n        let openAndClose = { isOpen: false, openTime: null, closeTime: null };\n        if (weekDay === 1) {\n            openAndClose.isOpen = openingTimes.mon_is_open;\n            openAndClose.openTime = openingTimes.mon_open;\n            openAndClose.closeTime = openingTimes.mon_close;\n        } else if (weekDay === 2) {\n            openAndClose.isOpen = openingTimes.tue_is_open;\n            openAndClose.openTime = openingTimes.tue_open;\n            openAndClose.closeTime = openingTimes.tue_close;\n        } else if (weekDay === 3) {\n            openAndClose.isOpen = openingTimes.wed_is_open;\n            openAndClose.openTime = openingTimes.wed_open;\n            openAndClose.closeTime = openingTimes.wed_close;\n        } else if (weekDay === 4) {\n            openAndClose.isOpen = openingTimes.thu_is_open;\n            openAndClose.openTime = openingTimes.thu_open;\n            openAndClose.closeTime = openingTimes.thu_close;\n        } else if (weekDay === 5) {\n            openAndClose.isOpen = openingTimes.fri_is_open;\n            openAndClose.openTime = openingTimes.fri_open;\n            openAndClose.closeTime = openingTimes.fri_close;\n        } else if (weekDay === 6) {\n            openAndClose.isOpen = openingTimes.sat_is_open;\n            openAndClose.openTime = openingTimes.sat_open;\n            openAndClose.closeTime = openingTimes.sat_close;\n        }\n        else if (weekDay === 7) {\n            openAndClose.isOpen = openingTimes.sun_is_open;\n            openAndClose.openTime = openingTimes.sun_open;\n            openAndClose.closeTime = openingTimes.sun_close;\n        }\n        return openAndClose;\n    }\n    return null;\n}\n\nexport const inputHorarioReplyMsg = (openAndClose) => {\n    let replyMsg = '';\n    if (openAndClose) {\n        if (openAndClose.isOpen === true) {\n            const strOpenTime = new Date(openAndClose.openTime).getHours() + ':' + new Date(openAndClose.openTime).getMinutes().toString().padStart(2, '0');\n            const strCloseTime = new Date(openAndClose.closeTime).getHours() + ':' + new Date(openAndClose.closeTime).getMinutes().toString().padStart(2, '0');\n\n            replyMsg = 'Olá, hoje nosso horário de funcionamento é a partir das ';\n            replyMsg = replyMsg + strOpenTime + ' horas, até às ';\n            replyMsg = replyMsg + strCloseTime + ' horas.';\n        } else {\n            replyMsg = 'Olá, infelizmente hoje estamos fechados, então, não estamos aceitando pedidos. ';\n        }\n    }\n    return replyMsg;\n}\n"],"file":"actionsController.js"}