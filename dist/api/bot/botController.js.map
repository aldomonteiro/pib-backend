{"version":3,"sources":["../../../src/api/bot/botController.js"],"names":["log_file","fs","createWriteStream","__dirname","flags","log_stdout","process","stdout","console","log","d","write","util","format","MSG_GENERAL_ERROR","sendErrorMsg","_errorMsg","out","Elements","_showErrorMsg","add","text","basicReply","replyText","type","askForContinue","options","data","event","checkLastAction","pageId","userId","pendingOrder","order","wf","waitingFor","wfd","waitingForData","addrData","confirmAddress","askForLocation","location","lat","location_lat","long","location_long","url","location_url","confirmLocationAddress","askForSizeCat","askForDeliver","askForCategory","askForQuantity","checkSplit","askForFlavor","askForChangeOrder","showPartialOrder","askForWantBeverage","askForBeverages","askForPaymentType","askForPaymentChange","askForComments","showFullOrder","showOrderOrNextItem","sendMainMenu","optionsStopOrder","passThreadControl","source","result","_txt","sendWelcomeMessage","pageID","sender","info","_nameToReplace","fetch","first_name","page","replyMsg","firstResponseText","replace","sendHorario","todayIsOpen","todayOpenAt","todayCloseAt","reply","sendCardapio","id","getFlavorsAndToppings","categoryID","sizeID","flavorArray","allToppings","pricings","flavorsWithPrice","flavor","categoryId","price","sizeId","toppingsNames","toppings","tId","topping","push","error","flavorsAndToppingsErr","askForWantOrder","storeData","delivery_time","pickup_time","time","showDeliver","user","_phone","deliverType","deliverTime","phone","_txtReply","showDeliverCheckAddress","prevAnswer","confirmAddressOrAskLocation","nextQuestion","isLocation","addresses","length","foundAnyCompleteAddress","i","element","address_components","_data","formatted_address","button","addressNumber","subtext","buttons","buttonsOpt","isOnlyButtons","askToTypeAddress","userID","waitingForAddress","_replyText","formattedAddress","showAddress","formattedAddrData","showOrderOrAskForPhone","isComplete","po","askForPhone","_options","isPhoneNumber","askToTypePhone","confirmTypedPhone","replies","QuickReplies","setQuickReplies","showPhone","showDeliverAskForQuantity","showAddressAskForQuantity","backToConfirmation","whatsText","askForQuantityMore","showQuantity","qty","substr","undo","currentItem","askForSize","_text","sizesWithPricing","sizes","size","split","qty_total","eraseSplit","showQuantityAskForSize","showSize","multiple","currentItemSize","currentSize","askForFlavorOrConfirm","showSizeCheckSplit","showSplit","originalSplit","_txtFlavor","currentItemSplit","items","status","flavorId","_id","showSplitCheckFlavor","currentItemCategory","flavorsArray","_splitForTheItem","currentSplit","_rangeIni","_rangeEnd","_fl","_subtext","join","concat","hidden","option","showFlavor","origSplit","orderId","itemId","_complete","completeItem","calcTotal","cancelPendingShowPartialOrder","splice","total_price","item","_txtQty","_txtSize","category","backTo","showFlavorCheckItem","showPaymentType","paymentType","_txtPaymentType","showPaymentTypeAskForPaymentChange","showPaymentChange","paymentChange","_txtPaymentChange","showPaymentChangeAskForComments","askToTypeComments","showComments","comments","_txtComments","deliver_type","address","payment_type","payment_change","showPaymentTypeAskForComments","showFullOrderConfirmOrder","confirmOrder","nextAnswer","hasOwnProperty","confirmStep","_evt","askForOptionsToChange","beverageId","askForOptionsToChangeErr","askForSpecificItem","_itemId","_sizeSplit","toUpperCase","indexOf","noBeverage","no_beverage","beveragesArr","_bev","beverage","name","kind","showNoBeverage","showBeverage","beveragePrice","showBeverageAskForPaymentType","showNoBeverageAskForPaymentType","changeItem","result1","newItemsNumber","_currentItem","_qty","cancelItem","updateItemAskOptions","sendShippingNotification","accessToken","Bot","send_message_tag","sendRejectionNotification","rejectionExplanation","cancelPendingOrder","showDeliverAskForCategory","showAddressAskForCategory","categories","is_pizza","showCategory","eraseSize","showCategoryAskForSize","price_by_size"],"mappings":"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","sourcesContent":["import util from 'util';\nimport fs from 'fs';\nimport { Bot, Elements, Buttons, QuickReplies } from 'facebook-messenger-bot';\nimport { getOnePageToken, getOnePageData, sendPassThreadControl } from '../controllers/pagesController';\nimport { getPricingSizing, getPricings } from '../controllers/pricingsController';\nimport { getFlavors } from '../controllers/flavorsController';\nimport { getToppingsFull } from '../controllers/toppingsController';\nimport { getCardapio } from './show_cardapio';\nimport { getSizes, getSize } from '../controllers/sizesController';\nimport { getBeverages } from '../controllers/beveragesController';\nimport { getTodayOpeningTime, getStoreData } from '../controllers/storesController';\nimport { updateOrder, getOrderPending, cancelOrder } from '../controllers/ordersController';\nimport {\n    getAddressLocation,\n    getCustomerAddress, formatAddrData,\n} from '../controllers/customersController';\nimport { updateStatusSpecificItem, deleteItem, reorderItems, deletePendingItem, updateItemStatus } from '../controllers/itemsController';\nimport { formatWhatsappNumber, formatAsCurrency } from '../util/util';\nimport { getCategories, getCategory } from '../controllers/categoriesController';\n\n// TODO: create a debugger with json format\nvar log_file = fs.createWriteStream(__dirname + '/debug.log', { flags: 'w' });\nvar log_stdout = process.stdout;\n\nconsole.log = function (d) { //\n    log_file.write(util.format(d) + '\\n');\n    log_stdout.write(util.format(d) + '\\n');\n};\n\nconst MSG_GENERAL_ERROR = 'Ops, estamos com um probleminha técnico: ';\n\n// // create a custom timestamp format for log statements\n// const SimpleNodeLogger = require('simple-node-logger'),\n//     opts = {\n//         logFilePath: 'logs/bot.log',\n//         timestampFormat: 'YYYY-MM-DD HH:mm:ss.SSS'\n//     },\n//     log = SimpleNodeLogger.createSimpleLogger(opts);\n\nexport const sendErrorMsg = async (_errorMsg) => {\n    const out = new Elements();\n    let _showErrorMsg = _errorMsg || 'ERRO DESCONHECIDO';\n    out.add({ text: MSG_GENERAL_ERROR + _showErrorMsg });\n    return out;\n}\n\n// export const updateOrderFlow = async (pageID, userID) => {\n\n// }\n\nexport const basicReply = async (replyText) => {\n    if (!replyText) {\n        replyText = 'Hi, how are you doing?';\n    }\n    return { type: 'text', text: replyText };\n}\n\n/**\n * Send Yes or No to the user asking if he wants to place an order right now.\n * @param {*} pageId\n * @param {*} userId\n */\nexport const askForContinue = async () => {\n    return {\n        type: 'replies',\n        text: 'Não entendi o que você quis dizer. 😞.\\n Vamos continuar com o pedido?',\n        options: [\n            { text: 'Sim', data: 'continueorder_yes', event: 'ORDER_CONTINUE_ORDER' },\n            { text: 'Não', data: 'continueorder_no', event: 'ORDER_CONTINUE_ORDER' },\n        ],\n    }\n}\n\nexport const checkLastAction = async (pageId, userId) => {\n    const pendingOrder = await getOrderPending({ pageId, userId });\n\n    if (pendingOrder.order) {\n        const wf = pendingOrder.order.waitingFor;\n        const wfd = pendingOrder.order.waitingForData;\n\n        if (wf === 'confirm_address') {\n            const addrData = await getCustomerAddress(pageId, userId);\n            return await confirmAddress(pageId, userId, addrData);\n        } else if (wf === 'location')\n            return await askForLocation(pageId, userId);\n        else if (wf === 'location_address') {\n            const location = {\n                lat: pendingOrder.order.location_lat,\n                long: pendingOrder.order.location_long,\n                url: pendingOrder.order.location_url,\n            }\n            return await confirmLocationAddress(pageId, userId, location);\n        } else if (wf === 'size')\n            return await askForSizeCat(pageId, userId)\n        else if (wf === 'deliver')\n            return await askForDeliver(pageId, userId);\n        else if (wf === 'category')\n            return await askForCategory(pageId, userId, wfd);\n        else if (wf === 'quantity')\n            return await askForQuantity(pageId, userId);\n        else if (wf === 'split')\n            return checkSplit(pageId, userId, 1);\n        else if (wf === 'flavor')\n            return await askForFlavor(pageId, userId, 1);\n        else if (wf === 'change_order')\n            return await askForChangeOrder(pageId, userId);\n        else if (wf === 'partial_confirmation')\n            return await showPartialOrder(pageId, userId);\n        else if (wf === 'want_beverage')\n            return await askForWantBeverage(pageId, userId);\n        else if (wf === 'beverage')\n            return await askForBeverages(pageId, userId, 1);\n        else if (wf === 'payment_type')\n            return await askForPaymentType(pageId, userId);\n        else if (wf === 'payment_change')\n            return await askForPaymentChange(pageId, userId);\n        else if (wf === 'comments')\n            return await askForComments(pageId, userId);\n        else if (wf === 'full_confirmation')\n            return await showFullOrder(pageId, userId);\n        else if (wf === 'nothing')\n            return await showOrderOrNextItem(pageId, userId);\n        else\n            return await sendMainMenu();\n    } else\n        return await sendMainMenu();\n}\n\nexport const optionsStopOrder = async () => {\n    return {\n        type: 'replies',\n        text: 'Muito bem, aqui estão as opções:',\n        options: [\n            { text: 'Voltar p/ Início', data: 'stoporder_init', event: 'STOP_ORDER_OPTIONS' },\n            { text: 'Falar c/ Humano', data: 'stoporder_human', event: 'STOP_ORDER_OPTIONS' },\n        ],\n    }\n}\n\nexport const passThreadControl = async (pageId, userId, source) => {\n    if (source && source === 'whatsapp') {\n\n    } else {\n        const result = await sendPassThreadControl(pageId, userId);\n\n        let _txt = '';\n\n        if (result === 200) {\n            _txt = 'Ok, a partir de agora você está nas mãos do nosso humano.';\n            _txt += ' O que você escrever a partir de agora será respondido por uma pessoa,'\n            _txt += 'o mais rápido possível!';\n        } else {\n            _txt = 'Ops, tivemos um probleminha. Tente novamente';\n        }\n        return { type: 'text', text: _txt };\n    }\n}\n\n/**\n *\n * @param {*} sender\n * @param {*} pageID\n */\nexport const sendWelcomeMessage = async (pageID, sender) => {\n\n    console.info('sendWelcomeMessage', typeof sender);\n\n    let _nameToReplace = '';\n    if (sender && typeof sender !== 'string') {\n        // This only works on Facebook\n        await sender.fetch('first_name');\n        _nameToReplace = sender.first_name;\n    } else if (sender && typeof sender === 'string')\n        _nameToReplace = sender;\n\n    const page = await getOnePageData(pageID);\n    const replyMsg = page.firstResponseText.replace('$NAME', _nameToReplace);\n\n    return { type: 'text', text: replyMsg };\n}\n\nexport const sendMainMenu = async () => {\n    return {\n        type: 'buttons',\n        text: 'Por favor escolha uma das opções',\n        options: [\n            { text: '🍕 Cardápio', data: 'CARDAPIO_PAYLOAD', event: 'MAIN-MENU' },\n            { text: '🕒 Horários', data: 'HORARIO_PAYLOAD', event: 'MAIN-MENU' },\n            { text: '📨 Fazer Pedido', data: 'PEDIDO_PAYLOAD', event: 'MAIN-MENU' },\n        ],\n    };\n\n    // const buttons = new Buttons();\n    // buttons.add({ text: '🍕 Cardápio', data: 'CARDAPIO_PAYLOAD', event: 'MAIN-MENU' });\n    // buttons.add({ text: '🕒 Horários', data: 'HORARIO_PAYLOAD', event: 'MAIN-MENU' });\n    // buttons.add({ text: '📨 Fazer Pedido', data: 'PEDIDO_PAYLOAD', event: 'MAIN-MENU' });\n\n    // const out = new Elements();\n    // out.add({ text: 'Por favor escolha uma das opções', buttons });\n\n    // return out;\n}\n\nexport const sendHorario = async (pageID, source) => {\n    const { todayIsOpen, todayOpenAt, todayCloseAt } = await getTodayOpeningTime(pageID);\n\n    let replyMsg = '';\n    if (todayIsOpen === true) {\n        replyMsg = 'Estamos abertos hoje, a partir das ' + todayOpenAt + ' horas, até às ' + todayCloseAt + ' horas.';\n    } else {\n        replyMsg = 'Infelizmente hoje não estamos abertos, mas você pode consultar nosso cardápio no menu principal.';\n    }\n\n    if (source && source === 'whatsapp') {\n        const reply = await sendMainMenu();\n        reply.text = replyMsg + '\\n\\n' + reply.text;\n        return reply;\n    } else\n        return { type: 'text', text: replyMsg };\n}\n\n/**\n * Returns only the formatted text to be sent to the user\n * @param {*} pageID\n */\nexport const sendCardapio = async (pageID, data, source) => {\n    const replyMsg = await getCardapio(pageID, data.id);\n\n    if (source && source === 'whatsapp') {\n        const reply = await sendMainMenu();\n        reply.text = replyMsg + '\\n\\n' + reply.text;\n        return reply;\n    } else\n        return { type: 'text', text: replyMsg };\n}\n\n\n/**\n * Returns array of flavors. If sizeID was passed, only returns flavors with price.\n * @param {*} pageID\n * @param {*} sizeID\n */\nexport const getFlavorsAndToppings = async (pageID, categoryID, sizeID) => {\n    try {\n        const flavorArray = await getFlavors(pageID);\n        const allToppings = await getToppingsFull(pageID);\n        const pricings = await getPricings(pageID);\n        const flavorsWithPrice = [];\n        for (let flavor of flavorArray) {\n            if (categoryID && flavor.categoryId === categoryID) {\n                if (sizeID) {\n                    for (let price of pricings) {\n                        if (price.categoryId === flavor.categoryId && price.sizeId === sizeID) {\n                            flavor.price = price.price;\n                            break;\n                        }\n                    }\n                }\n                if (flavor.price) {\n                    flavor.toppingsNames = [];\n                    for (let tId of flavor.toppings) {\n                        for (let topping of allToppings) {\n                            if (topping.id === tId) {\n                                flavor.toppingsNames.push(topping.topping);\n                            }\n                        }\n                    }\n                    flavorsWithPrice.push(flavor);\n                }\n            }\n        }\n        return flavorsWithPrice;\n    } catch (flavorsAndToppingsErr) {\n        console.error({ flavorsAndToppingsErr });\n    }\n}\n\n\n/**\n * Send Yes or No to the user asking if he wants to place an order right now.\n */\nexport const askForWantOrder = async () => {\n    return {\n        type: 'replies',\n        text: 'Agora que você viu nosso cardápio, você está pronto para fazer o pedido?',\n        options: [\n            { text: 'Sim', data: 'wantorder_yes', event: 'ORDER_WANT_ORDER' },\n            { text: 'Não', data: 'wantorder_no', event: 'ORDER_WANT_ORDER' },\n        ],\n    };\n\n    // const out = new Elements();\n    // let _txt = 'Agora que você viu nosso cardápio, você está pronto para fazer o pedido?';\n    // out.add({ text: _txt });\n\n    // const replies = new QuickReplies();\n    // // replies.add({ text: \"Quantidade\", data: \"change_quantity\", event: 'ORDER_CHANGE' });\n    // replies.add({ text: \"Sim\", data: \"wantorder_yes\", event: 'ORDER_WANT_ORDER' });\n    // replies.add({ text: \"Não\", data: \"wantorder_no\", event: 'ORDER_WANT_ORDER' });\n    // out.setQuickReplies(replies);\n    // return out;\n}\n\nexport const askForDeliver = async (pageId, userId) => {\n    await updateOrder({ pageId, userId, waitingFor: 'deliver' });\n\n    const storeData = await getStoreData(pageId);\n    let _txt = '';\n\n    if (storeData.delivery_time) {\n        _txt += `Tempo de entrega: por volta de *${storeData.delivery_time}* minutos\\n`;\n    }\n    if (storeData.pickup_time) {\n        _txt += `Para retirar aqui: por volta de *${storeData.pickup_time}* minutos\\n`;\n    }\n\n    _txt += 'O pedido é para entregar ou você vem retirar aqui?'\n\n    return {\n        type: 'replies',\n        text: _txt,\n        options: [\n            {\n                text: 'Entregar',\n                data: { type: 'delivery', time: storeData.delivery_time },\n                event: 'ORDER_DELIVER',\n            },\n            {\n                text: 'Retirar',\n                data: { type: 'pickup', time: storeData.pickup_time },\n                event: 'ORDER_DELIVER',\n            },\n        ],\n    }\n}\n\nexport const showDeliver = async (pageId, userId, data, user, source) => {\n    let _phone = null;\n    if (source && source === 'whatsapp') {\n        _phone = formatWhatsappNumber(userId);\n    }\n\n    await updateOrder({ pageId, userId, deliverType: data.type, deliverTime: data.time, user: user, phone: _phone, source: source });\n\n    let _txtReply = data === 'delivery' ? 'Entregaremos o seu pedido.' : 'Retirar o pedido conosco.';\n\n    return {\n        type: 'text',\n        text: '✅ ' + _txtReply,\n    };\n}\n\nexport const showDeliverCheckAddress = async (pageId, userId, data, user, source) => {\n    const prevAnswer = await showDeliver(pageId, userId, data, user, source);\n    const nextQuestion = await confirmAddressOrAskLocation(pageId, userId, user, source)\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n\n/**\n * Question No.01\n * If the user doesnt have an address in the database, this will be the first question.\n */\nexport const askForLocation = async (pageId, userId, user, source) => {\n\n    let _phone = null;\n    if (source && source === 'whatsapp') {\n        _phone = formatWhatsappNumber(userId);\n    }\n\n    await updateOrder({ pageId, userId, user, waitingFor: 'location', phone: _phone, source: source });\n\n    if (!source || source === 'messenger') {\n        return {\n            type: 'replies',\n            text: 'Para começar, preciso saber aonde você está. Por favor clique no botão abaixo para me mandá-la.',\n            options: [\n                { text: 'Localização', isLocation: true, data: 'location_location', event: 'LOCATION' },\n            ],\n        }\n    } else if (source === 'whatsapp') {\n        return {\n            type: 'text',\n            text: 'Para começar, preciso saber aonde você está. Favor enviar a sua localização.',\n            options: [\n                { text: 'Localização', data: 'location_location', event: 'LOCATION' },\n            ],\n        }\n    }\n}\n\n\nexport const confirmLocationAddress = async (pageId, userId, location, user) => {\n    if (location) {\n        await updateOrder({ pageId, userId, location, user, waitingFor: 'location_address' });\n\n        const addresses = await getAddressLocation(location);\n\n        if (addresses && addresses.length && addresses.length > 0) {\n\n            let foundAnyCompleteAddress = false;\n            const options = [];\n            for (let i = 0; i < 4; i++) {\n                const element = addresses[i];\n                if (element.address_components && element.address_components.length >= 6) {\n                    foundAnyCompleteAddress = true;\n                    const _data = { formatted_address: element.formatted_address, address_components: element.address_components };\n                    const button = { text: 'Esse!', data: _data, event: 'LOCATION_ADDRESS' };\n                    let addressNumber = i + 1;\n                    options.push({ text: 'Endereço ' + addressNumber, subtext: element.formatted_address, buttons: button });\n                }\n            }\n\n            if (foundAnyCompleteAddress) {\n                const buttonsOpt = { data: 'incorrect_address', event: 'LOCATION_ADDRESS' };\n                options.push({\n                    text: 'Não é meu endereço..',\n                    subtext: 'Selecione essa opção se seu endereço não aparece',\n                    buttons: buttonsOpt,\n                    isOnlyButtons: true,\n                });\n                return {\n                    type: 'list',\n                    text: 'Encontrei esses endereços, selecione o correto:',\n                    options: options,\n                };\n            } else {\n                return await askToTypeAddress(pageId, userId);\n            }\n        } else {\n            return await askToTypeAddress(pageId, userId);\n        }\n    } else {\n        return await askToTypeAddress(pageId, userId);\n    }\n}\n\nexport const confirmAddressOrAskLocation = async (pageId, userId, user, source) => {\n\n    // TODO: check if the location is in the neighborhood.\n    // TODO: check if the location is the same as stored in db.\n    const addrData = await getCustomerAddress(pageId, userId);\n\n    if (addrData) {\n        return confirmAddress(pageId, userId, addrData, user, source);\n    } else {\n        return await askForLocation(pageId, userId, user, source);\n    }\n}\n\nexport const askToTypeAddress = async (pageID, userID) => {\n    await updateOrder({ pageId: pageID, userId: userID, waitingForAddress: true, waitingFor: 'typed_address' });\n\n    return {\n        type: 'text',\n        text: 'Não foi possível localizar um endereço válido. Digite o seu endereço completo por favor.',\n    }\n}\n\nexport const confirmAddress = async (pageId, userId, addrData, user, source) => {\n    let _phone = null;\n    if (source && source === 'whatsapp') {\n        _phone = formatWhatsappNumber(userId);\n    }\n\n    if (user)\n        await updateOrder({\n            pageId, userId, user, waitingForAddress: false,\n            waitingFor: 'confirm_address', phone: _phone,\n        });\n    else\n        await updateOrder({\n            pageId, userId, waitingForAddress: false,\n            waitingFor: 'confirm_address', phone: _phone,\n        });\n\n    let _replyText = 'A entrega será para esse endereço?\\n';\n    _replyText = _replyText + addrData.formattedAddress;\n\n    return {\n        type: 'replies',\n        text: _replyText,\n        options: [\n            { text: 'Sim', data: addrData, event: 'CORRECT_SAVED_ADDRESS' },\n            { text: 'Não', data: addrData, event: 'WRONG_SAVED_ADDRESS' },\n        ],\n    }\n}\n\nexport const showAddress = async (pageId, userId, addrData, source) => {\n    let _phone = null;\n    if (source && source === 'whatsapp') {\n        _phone = formatWhatsappNumber(userId);\n    }\n\n    if (addrData && addrData.address_components) {\n        const formattedAddrData = await formatAddrData(addrData);\n        await updateOrder({ pageId, userId, addrData: formattedAddrData, phone: _phone });\n    } else {\n        await updateOrder({ pageId, userId, addrData, phone: _phone });\n    }\n\n    return {\n        type: 'text',\n        text: 'Ok, entregaremos nesse endereço.',\n    }\n}\n\n\nexport const showOrderOrAskForPhone = async (pageId, userId) => {\n    const po = await getOrderPending({ pageId, userId, isComplete: false });\n\n    if (po.order && po.order.waitingFor === 'partial_confirmation')\n        return await showOrderOrNextItem(pageId, userId);\n    else\n        return await askForPhone(pageId, userId);\n}\n\nexport const askForPhone = async (pageId, userId) => {\n    await updateOrder({ pageId, userId, waitingFor: 'phone' });\n\n    const _txt = 'Pode nos enviar o seu telefone para confirmar o seu pedido? Se não aparecer o seu telefone (ou estiver errado), use a opção digitar.';\n\n    const _options = []\n    _options.push({ text: 'Telefone', isPhoneNumber: true, data: 'phone_number', event: 'PHONE_NUMBER' });\n    _options.push({ text: 'Digitar o telefone', data: 'change_phone', event: 'PHONE_CONFIRMED' });\n\n    return {\n        type: 'replies',\n        text: _txt,\n        options: _options,\n    };\n}\n\nexport const askToTypePhone = async (pageId, userId) => {\n\n    await updateOrder({ pageId, userId, waitingFor: 'phone' });\n\n    const out = new Elements();\n    out.add({ text: 'Por favor, digite o número do telefone válido para que possamos confirmar o pedido. Pode digitar o 📞:' });\n    return out;\n}\n\nexport const confirmTypedPhone = async (pageId, userId, phone) => {\n    const out = new Elements();\n\n    await updateOrder({ pageId, userId, waitingFor: 'phone' });\n\n    let _txt = 'O telefone ' + phone + ' está coreto?';\n    out.add({ text: _txt });\n\n    const replies = new QuickReplies();\n    replies.add({ text: 'Sim', data: phone, event: 'PHONE_CONFIRMED' });\n    replies.add({ text: 'Não, usar outro', data: 'change_phone', event: 'PHONE_CONFIRMED' });\n    out.setQuickReplies(replies);\n\n    return out;\n}\n\n\nexport const showPhone = async (pageId, userId, phone) => {\n    await updateOrder({ pageId, userId, phone, waitingFor: 'nothing' });\n\n    const out = new Elements();\n    out.add({ text: 'Usaremos o número ' + phone + ' para confirmar o pedido. Agora vou pegar as informações do pedido.' });\n    return out;\n}\n\nexport const showDeliverAskForQuantity = async (pageId, userId, data, user, source) => {\n    const prevAnswer = await showDeliver(pageId, userId, data, user, source);\n    const nextQuestion = await askForQuantity(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n\n/**\n * Show Address only stores the addres in database. Ignoring the return.\n * The user is gonna see the AskForQuantity.\n * Used on Whatsapp.\n * @param {*} pageId\n * @param {*} userId\n * @param {*} addrData\n */\nexport const showAddressAskForQuantity = async (pageId, userId, addrData, source) => {\n    const prevAnswer = await showAddress(pageId, userId, addrData, source);\n    let nextQuestion;\n\n    // Show Address can be called from the creation order flow or from\n    // the update order flow. Below, if it was called from the update order\n    // flow, I am gonna return the flow to the showOrder or showFullOrder\n    const po = await getOrderPending({ pageId, userId, isComplete: false });\n    if (po && po.order && po.order.backToConfirmation) {\n        if (po.order.backToConfirmation === 'full_confirmation') {\n            nextQuestion = await showFullOrder(pageId, userId);\n        } else if (po.order.backToConfirmation === 'partial_confirmation') {\n            nextQuestion = await showOrderOrNextItem(pageId, userId);\n        } else {\n            nextQuestion = await askForQuantity(pageId, userId);\n        }\n    } else {\n        nextQuestion = await askForQuantity(pageId, userId);\n    }\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\nexport const askForQuantity = async (pageId, userId) => {\n    await updateOrder({ pageId, userId, waitingFor: 'quantity' });\n\n    return {\n        type: 'replies',\n        text: 'Quantas pizzas você quer?',\n        options: [\n            { text: '1', whatsText: 'Uma', data: 'qty_1', event: 'ORDER_QTY' },\n            { text: '2', whatsText: 'Duas', data: 'qty_2', event: 'ORDER_QTY' },\n            { text: '3', whatsText: 'Três', data: 'qty_3', event: 'ORDER_QTY' },\n            { text: '+ de 3', data: 'qty_more', event: 'ORDER_QTY' },\n        ],\n    }\n}\n\nexport const askForQuantityMore = async (pageId, userId) => {\n    await updateOrder({ pageId, userId, waitingFor: 'quantity' });\n\n    return {\n        type: 'replies',\n        text: 'Quantas pizzas você quer?',\n        options: [\n            { text: '- de 4', data: 'qty_less', event: 'ORDER_QTY' },\n            { text: '4', whatsText: 'Quatro', data: 'qty_4', event: 'ORDER_QTY' },\n            { text: '5', whatsText: 'Cinco', data: 'qty_5', event: 'ORDER_QTY' },\n            { text: '6', whatsText: 'Seis', data: 'qty_6', event: 'ORDER_QTY' },\n        ],\n    }\n}\n\nexport const showQuantity = async (pageId, userId, data) => {\n    // data is 'qty_1', 'qty_2', 'qty_3'...\n    const qty = data.substr(data.length - 1, 1);\n\n    await updateOrder({ pageId, userId, qty, waitingFor: 'size', undo: 'quantity', currentItem: 1 });\n\n    let out;\n    if (qty == 1) {\n        out = {\n            type: 'text',\n            text: '✅ ' + ' 1 pizza.',\n        };\n    } else {\n        out = {\n            type: 'text',\n            text: '✅ ' + qty + ' pizzas.',\n        };\n    }\n\n    out.text = out.text + '(digite 0 p/ desfazer)'\n\n    return out;\n}\n\nexport const askForSize = async (pageId, userId) => {\n\n    const po = await getOrderPending({ pageId, userId, isComplete: false });\n\n    if (po.order) {\n        let _text = '';\n        if (po.order.qty === 1) {\n            _text = 'Qual o tamanho da pizza?';\n        } else {\n            _text = 'Agora vou pegar os detalhes da ' + po.order.currentItem + 'a. pizza.\\n';\n            _text = _text + 'Qual o tamanho dela?';\n        }\n\n        const _options = [];\n        const sizesWithPricing = await getPricingSizing(pageId); // only sizes with pricing\n        const sizes = await getSizes(pageId, sizesWithPricing);\n        for (let i = 0; i < sizes.length; i++) {\n            const _data = { id: sizes[i].id, size: sizes[i].size, split: sizes[i].split };\n            _options.push({ text: sizes[i].size, data: _data, event: 'ORDER_SIZE' });\n        }\n\n        const out = {\n            type: 'replies',\n            text: _text,\n            options: _options,\n        }\n        if (po.order.qty === 1)\n            await updateOrder({ pageId, userId, waitingFor: 'size' });\n        else\n            await updateOrder({\n                pageId, userId, waitingFor: 'size',\n                qty_total: po.order.qty_total, currentItem: po.order.currentItem, eraseSplit: true,\n            });\n\n        return out;\n    } else {\n        const out = {\n            type: 'text',\n            text: MSG_GENERAL_ERROR,\n        };\n        return out;\n    }\n}\n\n/**\n * Calls ShowQuantity and AskForSize\n * Used on Whatsapp.\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showQuantityAskForSize = async (pageId, userId, data) => {\n    const prevAnswer = await showQuantity(pageId, userId, data);\n    const nextQuestion = await askForSize(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n\nexport const showSize = async (pageId, userId, data) => {\n    if (data && data.split && data.split > 1)\n        await updateOrder({ pageId, userId, sizeId: data.id, undo: 'size', waitingFor: 'split' });\n    else\n        await updateOrder({ pageId, userId, sizeId: data.id, undo: 'size', waitingFor: 'flavor' });\n\n    return {\n        type: 'text',\n        text: '✅ ' + ' Tamanho: ' + data.size + ' (digite 0 p/ desfazer)',\n    };\n}\n\n/**\n * Triggered by action CHECK_SPLIT\n * @param {*} pageId\n * @param {*} userId\n * @param {*} multiple\n */\nexport const checkSplit = async (pageId, userId, multiple) => {\n    const pendingOrder = await getOrderPending({ pageId: pageId, userId: userId, isComplete: true });\n    if (pendingOrder.order) {\n        const currentSize = await getSize(pageId, pendingOrder.order.currentItemSize);\n        // if split is gt than 1, ask user if he wants to split in more than one flavor.\n        if (currentSize.split && currentSize.split > 1) {\n            let _txt = 'A pizza ' + currentSize.size + ' pode ser dividida em ' + currentSize.split + ' sabores.\\n';\n            _txt = _txt + 'Escolha quantos sabores você quer:';\n\n            const _options = [];\n            for (let i = 1; i <= currentSize.split; i++) {\n                let _replyText = i === 1 ? i + ' Sabor' : i + ' Sabores';\n                _options.push({ text: _replyText, data: i, event: 'ORDER_SPLIT' });\n            }\n\n            return {\n                type: 'replies',\n                text: _txt,\n                options: _options,\n            };\n        } else {\n            return await askForFlavorOrConfirm(pageId, userId, multiple);\n        }\n    }\n}\n\nexport const showSizeCheckSplit = async (pageId, userId, data, multiple) => {\n    const prevAnswer = await showSize(pageId, userId, data);\n    const nextQuestion = await checkSplit(pageId, userId, multiple);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n/**\n * After user answer if he wants to split the pizza, show the chosen option.\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n **/\nexport const showSplit = async (pageId, userId, data) => {\n    await updateOrder({\n        pageId, userId,\n        sizeId: data.id,\n        waitingFor: 'flavor',\n        originalSplit: data,\n    });\n\n    let _txtFlavor = data === 1 ? 'Sabor' : 'Sabores';\n\n    return {\n        type: 'text',\n        text: '✅ ' + data + ' ' + _txtFlavor,\n    };\n}\n\n\nexport const askForFlavorOrConfirm = async (pageId, userId, multiple) => {\n    const po = await getOrderPending({ pageId: pageId, userId: userId, isComplete: true });\n\n    if (po.order) {\n        if (po.order.originalSplit > 1 &&\n            po.order.originalSplit >= po.order.currentItemSplit) {\n            return await askForFlavor(pageId, userId, multiple, po);\n        } else {\n            if (po.items && po.items.length) {\n                for (let i = 0; i < po.items.length; i++) {\n                    if (po.items[i].status === 0 && po.items[i].flavorId > 0) {\n                        await updateStatusSpecificItem(po.items[i]._id, 1);\n                        return await showOrderOrNextItem(pageId, userId);\n                    }\n                }\n                return await askForFlavor(pageId, userId, multiple, po);\n            }\n        }\n    }\n}\n\nexport const showSplitCheckFlavor = async (pageId, userId, data) => {\n    const prevAnswer = await showSplit(pageId, userId, data);\n    // Changing based on categories\n    // const nextQuestion = await askForFlavorOrConfirm(pageId, userId, 1);\n    const nextQuestion = await askForFlavor(pageId, userId, 1);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n\n/**\n *\n * @param {*} pageId\n * @param {*} userId\n * @param {*} multiple: if are the first 4 flavors, multiple=1, if are the next, multiple=2 and so on.\n */\nexport const askForFlavor = async (pageId, userId, multiple, pendingOrder) => {\n\n    let po = null;\n    if (pendingOrder && pendingOrder.order)\n        po = pendingOrder;\n    else po = await getOrderPending({ pageId: pageId, userId: userId, isComplete: false });\n\n    const flavorsArray = await getFlavorsAndToppings(pageId, po.order.currentItemCategory, po.order.currentItemSize);\n\n    // This variable will be passed as split parameter to updateOrder, so,\n    // updateOrder can update the item properly, with the value of originalSplit.\n    let _splitForTheItem = po.order.originalSplit;\n\n    // In case where the user typed an option wrongly, the bot invokes askForFlavor\n    // without the split parameter. So, because of this situation, I am retrieving\n    // the split from the order.\n    let currentSplit;\n    if (po.order.originalSplit > 1) {\n        if (!po.order.currentItemSplit) {\n            currentSplit = 1;\n        } else {\n            currentSplit = po.order.currentItemSplit;\n        }\n    }\n\n    // Rule to show 'Escolha o 1o. sabor', 'Escolha o 2o. sabor'\n    let _txt = 'Escolha o produto:'\n    if (currentSplit) {\n        // First time currentItemSplit is undefined, so, I am gonna use the originalSplit itself.\n        _txt = `Escolha o ${currentSplit}o. sabor:`\n    }\n\n    let _rangeIni = (multiple - 1) * 4;\n    let _rangeEnd = multiple * 4;\n\n    const _options = [];\n\n    for (let i = 0; i < flavorsArray.length; i++) {\n        if (flavorsArray[i]) {\n            const _fl = flavorsArray[i];\n            const _data = { id: _fl.id, flavor: _fl.flavor, price: _fl.price }\n            let _subtext = '';\n            if (_fl.toppingsNames && _fl.toppingsNames.length > 0)\n                _subtext = _fl.toppingsNames.join() + '\\n';\n            if (_fl.price) {\n                _subtext = _subtext.concat('R$', _fl.price);\n            }\n            const buttons = { text: 'Quero', data: _data, event: 'ORDER_FLAVOR' };\n\n            if (i >= _rangeIni && i < _rangeEnd)\n                _options.push({ text: _fl.flavor, subtext: _subtext, buttons });\n            else\n                _options.push({ text: _fl.flavor, subtext: _subtext, buttons, hidden: true });\n        }\n    }\n\n\n    if (flavorsArray.length > _rangeEnd) {\n        const buttons = { text: 'Voltar', data: currentSplit, event: 'ORDER_ASK_CATEGORY' };\n        _options.push({ text: 'Ver outra categoria', subtext: 'Ver outra categoria', buttons, hidden: true });\n\n        multiple++;\n        const buttonsOpt = {\n            text: '+ Opções',\n            data: { option: 'flavors_more', multiple: multiple }, event: 'ORDER_FLAVOR',\n        };\n        _options.push({\n            text: 'Ver + sabores', subtext: '+ sabores do cardápio',\n            buttons: buttonsOpt, isOnlyButtons: true,\n        });\n    } else {\n        const buttons = { text: 'Voltar', data: currentSplit, event: 'ORDER_ASK_CATEGORY' };\n        _options.push({ text: 'Ver outra categoria', subtext: 'Ver outra categoria', buttons });\n    }\n\n    updateOrder({\n        pageId, userId, waitingFor: 'flavor',\n        currentItemSplit: currentSplit,\n        currentItem: po.order.currentItem,\n        split: _splitForTheItem,\n    });\n\n    return {\n        type: 'fulllist',\n        text: _txt,\n        options: _options,\n    };\n}\n\nexport const showFlavor = async (pageId, userId, data) => {\n    const po = await getOrderPending({ pageId: pageId, userId: userId, isComplete: false });\n    let currentSplit;\n    let itemId;\n    let origSplit = po.order.originalSplit;\n    let orderId = po.order.id;\n    if (origSplit > 1 && po.order.currentItemSplit <= origSplit) {\n        if (po.order.currentItemSplit === 1)\n            itemId = po.order.currentItem ? po.order.currentItem + 1 : 1;\n        else\n            itemId = po.order.currentItem;\n\n        currentSplit = po.order.currentItemSplit + 1;\n    } else {\n        itemId = po.order.currentItem ? po.order.currentItem + 1 : 1;\n    }\n\n    let _complete = false;\n    if (origSplit > 1 && currentSplit > origSplit)\n        _complete = true;\n    else if (!po.order.originalSplit || origSplit === 1)\n        _complete = true;\n\n\n    console.info('showFlavor _complete:', _complete,\n        ' originalSplit:', po.order.originalSplit,\n        'currentSplit: ', currentSplit,\n        ' price: ', data.price);\n\n    await updateOrder({\n        pageId, userId, flavorId: data.id,\n        price: data.price,\n        completeItem: _complete,\n        waitingFor: 'nothing',\n        currentItemSplit: currentSplit,\n        currentItem: itemId,\n        categoryId: po.order.currentItemCategory,\n        calcTotal: true,\n    });\n\n    if (_complete) {\n        // without await, so, it can run later\n        updateItemStatus(pageId, orderId, itemId);\n    }\n\n    if (currentSplit) {\n        const showSplit = currentSplit - 1;\n        return {\n            type: 'text',\n            text: '✅ ' + showSplit + 'o. Sabor: ' + data.flavor,\n        };\n    } else {\n        return {\n            type: 'text',\n            text: '✅ ' + ' Sabor: ' + data.flavor,\n        };\n    }\n}\n\nexport const showOrderOrNextItem = async (pageId, userId) => {\n    const po = await getOrderPending({ pageId, userId, isComplete: true });\n\n    if (po.order.originalSplit > 1 && po.order.currentItemSplit <= po.order.originalSplit) {\n        return await askForCategory(pageId, userId, po.order.currentItemSplit);\n        // return await askForFlavor(pageId, userId, 1, po);\n    } else {\n        return await showPartialOrder(pageId, userId, po);\n        // await updateOrder({ pageId, userId, waitingFor: 'partial_confirmation', eraseSplit: true });\n\n        // let total_price = 0;\n        // _txt = _txt + '𝗣𝗲𝗱𝗶𝗱𝗼:' + po.order.id + '\\n';\n        // let _txt = 'Seguem os detalhes do seu pedido:\\n';\n        // for (let i = 0; i < po.items.length; i++) {\n        //     const _item = po.items[i];\n        //     if (_item.flavorId) {\n        //         let _txtQty = _item.split > 1 ? _item.qty + '/' + _item.split : _item.qty;\n\n        //         let _txtSize = '';\n        //         if (_item.sizeId)\n        //             _txtSize = _item.size;\n\n        //         _txt = _txt + `${_item.category}: ${_txtQty} ${_item.flavor} ${_txtSize} \\n`;\n        //     }\n        //     total_price += _item.price;\n        // }\n        // _txt = _txt + '𝗧𝗼𝘁𝗮𝗹: ' + formatAsCurrency(total_price) + '\\n\\n';\n\n        // _txt = _txt + 'Deseja incluir mais itens?';\n\n        // const _options = [];\n        // _options.push({\n        //     text: 'Sim, mostre-me as opções',\n        //     data: {\n        //         type: 'confirmation_yes',\n        //         backTo: 'partial_confirmation',\n        //     },\n        //     event: 'ORDER_ASK_CATEGORY',\n        // });\n        // _options.push({\n        //     text: 'Não, confirmar o pedido',\n        //     data: {\n        //         type: 'confirmation_yes',\n        //         backTo: 'partial_confirmation',\n        //     },\n        //     event: 'ORDER_PIZZA_CONFIRMATION',\n        // });\n\n        // return {\n        //     type: 'replies',\n        //     text: _txt,\n        //     options: _options,\n        // };\n    }\n}\n\nexport const cancelPendingShowPartialOrder = async (pageId, userId) => {\n    // TODO: delete items with status 0;\n    const po = await getOrderPending({ pageId, userId, isComplete: true });\n\n    if (po.items && po.items.length > 0) {\n        await deletePendingItem(pageId, po.order.id);\n\n        for (let i = 0; i < po.items.length; i++) {\n            if (po.items[i].status === 0) {\n                po.items.splice(i, 1);\n            }\n        }\n    }\n    return await showPartialOrder(pageId, userId, po);\n}\n\nexport const showPartialOrder = async (pageId, userId, po) => {\n    if (!po)\n        po = await getOrderPending({ pageId, userId, isComplete: true });\n\n    await updateOrder({ pageId, userId, waitingFor: 'partial_confirmation', eraseSplit: true, undo: '' });\n\n    let total_price = 0;\n    let _txt = '𝗣𝗲𝗱𝗶𝗱𝗼:' + po.order.id + '\\n';\n\n    if (po.items && po.items.length > 0) {\n        _txt = _txt + 'Seguem os detalhes do seu pedido:\\n\\n';\n        for (const item of po.items) {\n            if (item.flavorId) {\n                let _txtQty = item.split > 1 ? item.qty + '/' + item.split : item.qty;\n\n                let _txtSize = '';\n                if (item.sizeId)\n                    _txtSize = item.size;\n\n                _txt = _txt + `${item.category}: ${_txtQty} ${item.flavor} ${_txtSize} - ${formatAsCurrency(item.price)} \\n`;\n            }\n            total_price += item.price;\n        }\n        _txt = _txt + '𝗧𝗼𝘁𝗮𝗹: ' + formatAsCurrency(total_price) + '\\n\\n';\n    } else {\n        _txt = _txt + 'Ainda não foram incluídos itens no seu pedido.\\n\\n';\n    }\n\n    _txt = _txt + 'O que deseja fazer?';\n\n    const _options = [];\n    _options.push({\n        text: `Incluir ${po.items && po.items.length > 0 ? 'mais' : ''} itens no pedido`,\n        event: 'ORDER_ASK_CATEGORY',\n    });\n    if (po.items && po.items.length > 0) {\n        _options.push({\n            text: 'Confirmar o pedido',\n            data: {\n                type: 'confirmation_yes',\n                backTo: 'partial_confirmation',\n            },\n            event: 'ORDER_PIZZA_CONFIRMATION',\n        });\n        _options.push({\n            text: 'Remover/alterar algum item',\n            data: {\n                backTo: 'partial_confirmation',\n            },\n            event: 'ORDER_WANT_CHANGE',\n        });\n    }\n    _options.push({\n        text: 'Voltar p/ Início',\n        data: 'stoporder_init',\n        event: 'STOP_ORDER_OPTIONS',\n    });\n\n    return {\n        type: 'replies',\n        text: _txt,\n        options: _options,\n    };\n}\n\n\n// export const showOrderOrNextItem = async (pageId, userId) => {\n//     const po = await getOrderPending({ pageId, userId, isComplete: true });\n\n//     if (po.order.originalSplit > 1 && po.order.currentItemSplit <= po.order.originalSplit) {\n//         return await askForFlavor(pageId, userId, 1, po);\n//     } else if (po.order.qty > 1 && po.order.currentItem < po.order.qty) {\n//         const nextItem = po.order.currentItem + 1;\n//         await updateOrder({ pageId, userId, waitingFor: 'size', currentItem: nextItem });\n//         return await askForSize(pageId, userId);\n//     } else {\n//         await updateOrder({ pageId, userId, waitingFor: 'partial_confirmation', backToConfirmation: null });\n\n//         let total_price = 0;\n//         let _txt = 'Seguem os detalhes do seu pedido:\\n';\n//         _txt = _txt + '𝗣𝗲𝗱𝗶𝗱𝗼:' + po.order.id + '\\n';\n//         for (let i = 0; i < po.items.length; i++) {\n//             const _item = po.items[i];\n//             if (_item.flavorId && _item.sizeId) {\n//                 let _txtQty = _item.split > 1 ? _item.qty + '/' + _item.split : _item.qty;\n//                 _txt = _txt + `${_txtQty} pizza ${_item.size} de ${_item.flavor}\\n`;\n//             } else if (_item.beverageId && _item.beverage) {\n//                 _txt = _txt + `1 ${_item.beverage}\\n`;\n//             }\n//             total_price += _item.price;\n//         }\n//         if (po.order.deliver_type && po.order.deliver_type === 'pickup')\n//             _txt += 'Cliente vem retirar.'\n//         else\n//             _txt = _txt + '𝗘𝗻𝗱𝗲𝗿𝗲𝗰̧𝗼 𝗱𝗲 𝗘𝗻𝘁𝗿𝗲𝗴𝗮: ' + po.order.address + '\\n';\n//         _txt = _txt + '𝗧𝗲𝗹𝗲𝗳𝗼𝗻𝗲: ' + po.order.phone + '\\n';\n//         _txt = _txt + '𝗧𝗼𝘁𝗮𝗹: ' + formatAsCurrency(total_price) + '\\n';\n//         _txt = _txt + 'O pedido está correto?';\n\n//         const _options = [];\n//         _options.push({\n//             text: 'Sim',\n//             data: {\n//                 type: 'confirmation_yes',\n//                 backTo: 'partial_confirmation',\n//             },\n//             event: 'ORDER_PIZZA_CONFIRMATION',\n//         });\n//         _options.push({\n//             text: 'Não',\n//             data: {\n//                 type: 'confirmation_no',\n//                 backTo: 'partial_confirmation',\n//             },\n//             event: 'ORDER_PIZZA_CONFIRMATION',\n//         });\n\n//         return {\n//             type: 'replies',\n//             text: _txt,\n//             options: _options,\n//         };\n//     }\n// }\n\n\n/**\n * Used on Whatsapp\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showFlavorCheckItem = async (pageId, userId, data) => {\n    const prevAnswer = await showFlavor(pageId, userId, data);\n    const nextQuestion = await showOrderOrNextItem(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n\nexport const askForPaymentType = async (pageId, userId) => {\n    const _options = [];\n    _options.push({ text: 'Dinheiro', data: 'payment_money', event: 'ORDER_PAYMENT_TYPE' });\n    _options.push({ text: 'Cartão', data: 'payment_card', event: 'ORDER_PAYMENT_TYPE' });\n\n    await updateOrder({ pageId, userId, waitingFor: 'payment_type' });\n\n    return {\n        type: 'replies',\n        text: 'Qual a forma de pagamento?',\n        options: _options,\n    };\n}\n\nexport const showPaymentType = async (pageId, userId, data) => {\n    await updateOrder({ pageId, userId, paymentType: data });\n\n    let _txtPaymentType = data === 'payment_money' ? 'Dinheiro' : 'Cartão';\n\n    return {\n        type: 'text',\n        text: '✅ ' + ' Forma de pagamento: ' + _txtPaymentType,\n    };\n}\n\nexport const askForPaymentChange = async (pageId, userId) => {\n    const _options = [];\n    _options.push({ text: 'Sim', data: 'payment_change_yes', event: 'ORDER_PAYMENT_CHANGE' });\n    _options.push({ text: 'Não', data: 'payment_change_no', event: 'ORDER_PAYMENT_CHANGE' });\n\n    await updateOrder({ pageId, userId, waitingFor: 'payment_change' });\n\n    return {\n        type: 'replies',\n        text: 'Precisa de troco?',\n        options: _options,\n    };\n}\n\n\n/**\n * Used on Whatsapp\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showPaymentTypeAskForPaymentChange = async (pageId, userId, data) => {\n    const prevAnswer = await showPaymentType(pageId, userId, data);\n    const nextQuestion = await askForPaymentChange(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\nexport const showPaymentChange = async (pageId, userId, data) => {\n    await updateOrder({ pageId, userId, paymentChange: data });\n\n    let _txtPaymentChange = data === 'payment_change_yes'\n        ? 'Levaremos trocado'\n        : 'Não precisa de troco';\n\n    return {\n        type: 'text',\n        text: '✅ ' + _txtPaymentChange,\n    };\n}\n\nexport const askForComments = async (pageId, userId) => {\n    const _options = [];\n    _options.push({ text: 'Sim', data: 'comments_yes', event: 'ORDER_COMMENTS' });\n    _options.push({ text: 'Não', data: 'comments_no', event: 'ORDER_COMMENTS' });\n\n    await updateOrder({ pageId, userId, waitingFor: 'comments' });\n\n    return {\n        type: 'replies',\n        text: 'Quer enviar alguma observação sobre o pedido ou entrega?',\n        options: _options,\n    };\n}\n\nexport const showPaymentChangeAskForComments = async (pageId, userId, data) => {\n    const prevAnswer = await showPaymentChange(pageId, userId, data);\n    const nextQuestion = await askForComments(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n\nexport const askToTypeComments = async (pageID, userID) => {\n    await updateOrder({ pageId: pageID, userId: userID, waitingFor: 'typed_comments' });\n\n    return {\n        type: 'text',\n        text: 'Digite as observações que você tem para a entrega ou pedido. Pode digitar!',\n    }\n}\n\n\nexport const showComments = async (pageId, userId, text) => {\n    await updateOrder({ pageId, userId, comments: text });\n\n    let _txtComments = 'Observações para o pedido/entrega:\\n';\n    _txtComments += text;\n\n    return {\n        type: 'text',\n        text: '✅ ' + _txtComments,\n    };\n}\n\nexport const showFullOrder = async (pageId, userId) => {\n    // await updateOrder({ pageId, userId, waitingFor: 'full_confirmation', backToConfirmation: null });\n\n    const po = await getOrderPending({ pageId, userId, isComplete: true });\n\n    let total_price = 0;\n    let _txt = 'Seguem os detalhes do seu pedido:\\n\\n';\n\n    _txt = _txt + '𝗣𝗲𝗱𝗶𝗱𝗼: ' + po.order.id + '\\n';\n    for (const item of po.items) {\n        if (item.flavorId) {\n            let _txtQty = item.split > 1 ? item.qty + '/' + item.split : item.qty;\n            let _txtSize = item.sizeId ? item.size : '';\n            _txt = _txt + `_${item.category}_: ${_txtQty} ${item.flavor}  ${_txtSize}\\n`;\n        }\n        total_price += item.price;\n    }\n\n    if (po.order.deliver_type && po.order.deliver_type === 'pickup')\n        _txt += 'Cliente vem retirar.\\n'\n    else\n        _txt = _txt + '𝗘𝗻𝗱𝗲𝗿𝗲𝗰̧𝗼 𝗱𝗲 𝗘𝗻𝘁𝗿𝗲𝗴𝗮: ' + po.order.address + '\\n';\n\n    _txt = _txt + '𝗧𝗲𝗹𝗲𝗳𝗼𝗻𝗲: ' + po.order.phone + '\\n';\n    _txt = _txt + '𝗧𝗼𝘁𝗮𝗹: ' + formatAsCurrency(total_price) + '\\n';\n\n    let _txtPaymentType = po.order.payment_type === 'payment_card' ? 'Cartão' : 'Dinheiro';\n    _txt = _txt + '𝗙𝗼𝗿𝗺𝗮 𝗱𝗲 𝗣𝗮𝗴𝗮𝗺𝗲𝗻𝘁𝗼: ' + _txtPaymentType + '\\n';\n\n    if (po.payment_change === 'payment_change_yes') {\n        _txt = _txt + '𝗟𝗲𝘃𝗮𝗿 𝗧𝗿𝗼𝗰𝗼? Sim \\n';\n    }\n\n    let _txtComments = po.order.comments || 'Sem observações';\n    _txt = _txt + '𝗢𝗯𝘀𝗲𝗿𝘃𝗮𝗰̧𝗼̃𝗲𝘀: ' + _txtComments + '\\n';\n\n    return {\n        type: 'text',\n        text: _txt,\n    }\n\n    // the code below was used to ask for a final confirmation.\n    // _txt = _txt + 'Posso confirmar o pedido?';\n\n    // const _options = [];\n    // _options.push({\n    //     text: 'Sim',\n    //     data: {\n    //         type: 'confirmation_yes',\n    //         backTo: 'full_confirmation',\n    //     },\n    //     event: 'ORDER_CONFIRMATION',\n    // });\n    // _options.push({\n    //     text: 'Não',\n    //     data: {\n    //         type: 'confirmation_no',\n    //         backTo: 'full_confirmation',\n    //     },\n    //     event: 'ORDER_CONFIRMATION',\n    // });\n\n    // return {\n    //     type: 'replies',\n    //     text: _txt,\n    //     options: _options,\n    // };\n}\n\n/**\n * Used on Whatsapp\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showPaymentTypeAskForComments = async (pageId, userId, data) => {\n    const prevAnswer = await showPaymentType(pageId, userId, data);\n    const nextQuestion = await askForComments(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n/**\n * Used on Whatsapp\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showFullOrderConfirmOrder = async (pageId, userId, data) => {\n    if (data && data !== 'comments_no')\n        await showComments(pageId, userId, data);\n    // const nextQuestion = await showFullOrder(pageId, userId);\n\n    const prevAnswer = await showFullOrder(pageId, userId);\n    const nextAnswer = await confirmOrder(pageId, userId);\n\n    nextAnswer.text = prevAnswer.text + '\\n\\n' + nextAnswer.text;\n    return nextAnswer;\n}\n\nexport const confirmOrder = async (pageId, userId) => {\n    await updateOrder({ pageId, userId, confirmOrder: true, calcTotal: true });\n\n    return {\n        type: 'text',\n        text: '✅ Pedido Confirmado!',\n    };\n}\n\nexport const askForChangeOrder = async (pageId, userId, data) => {\n    let confirmStep;\n    if (data && data.hasOwnProperty('backTo')) {\n        confirmStep = data.backTo;\n    }\n\n    if (confirmStep) {\n        await updateOrder({ pageId, userId, waitingFor: 'change_order', backToConfirmation: confirmStep });\n    } else {\n        await updateOrder({ pageId, userId, waitingFor: 'change_order' });\n    }\n\n    let _txt = 'O que você gostaria de fazer com o seu pedido?';\n\n    const _options = [];\n    _options.push({ text: 'Mudar pedido', data: 'changeOrder', event: 'ORDER_WANT_CHANGE' });\n    _options.push({ text: 'Mudar endereço', data: 'change_address', event: 'ORDER_CHANGE' });\n\n    if (confirmStep) {\n        // confirmStep can be 'partial_confirmation' or 'full_confirmation'\n        const _evt = confirmStep === 'partial_confirmation'\n            ? 'ORDER_PIZZA_CONFIRMATION'\n            : 'ORDER_CONFIRMATION';\n\n        _options.push({\n            text: 'Confirmar.',\n            data: { type: 'confirmation_yes', backTo: confirmStep },\n            event: _evt,\n        });\n    }\n\n    return {\n        type: 'replies',\n        text: _txt,\n        options: _options,\n    };\n}\n\nexport const askForOptionsToChange = async (pageId, userId, item) => {\n    try {\n        if (item && item.beverageId) {\n            return await askForBeverages(pageId, userId, 1);\n        } else {\n            let _txt = 'Ok, o que você gostaria de alterar?';\n\n            const _options = [];\n            _options.push({ text: 'Tamanho/Sabor', data: item.itemId, event: 'ORDER_CHANGE_ITEM' });\n            _options.push({ text: 'Cancelar/Remover', data: item.itemId, event: 'ORDER_CANCEL_ITEM' });\n\n            return {\n                type: 'replies',\n                text: _txt,\n                options: _options,\n            };\n        }\n    } catch (askForOptionsToChangeErr) {\n        console.error({ askForOptionsToChangeErr });\n        throw askForOptionsToChangeErr;\n    }\n}\n\nexport const askForSpecificItem = async (pageId, userId) => {\n    const pendingOrder = await getOrderPending({ pageId, userId, isComplete: true });\n    if (pendingOrder.items && pendingOrder.items.length > 1) {\n\n        let _txt = 'Escolha qual dos itens deseja alterar/remover:';\n\n        const _options = [];\n        let _itemId = 0;\n        for (let item of pendingOrder.items) {\n            if (item.itemId !== _itemId) {\n                let _txt;\n                if (item.size && item.flavor) {\n                    let _sizeSplit = `${item.size}`;\n                    if (item.split && item.split > 1) {\n                        if (item.category.toUpperCase().indexOf('PIZZA') > -1)\n                            _sizeSplit = 'Pizza ' + _sizeSplit;\n                        _sizeSplit = _sizeSplit + ` ${item.split} Sabores`;\n                    } else\n                        _sizeSplit = item.flavor + ' ' + _sizeSplit;\n\n                    _txt = `${_sizeSplit}`;\n                } else {\n                    _txt = item.flavor;\n                }\n\n                if (_txt) {\n                    _options.push({ text: _txt, data: item, event: 'ORDER_CANCEL_ITEM' });\n                }\n                _itemId = item.itemId;\n            }\n        }\n        return {\n            type: 'replies',\n            text: _txt,\n            options: _options,\n        };\n    } else {\n        await updateOrder({ pageId, userId, completeItem: false });\n        return await askForOptionsToChange(pageId, userId, pendingOrder.items[0]);\n    }\n}\n\n/**\n *\n * @param {*} pageId\n * @param {*} userId\n */\nexport const askForWantBeverage = async (pageId, userId) => {\n    updateOrder({ pageId, userId, waitingFor: 'want_beverage' });\n\n    const pendingOrder = await getOrderPending({ pageId, userId, isComplete: false });\n\n    const noBeverage = pendingOrder.order.no_beverage;\n\n    if (typeof noBeverage === 'undefined') {\n\n        let _txt = 'Gostaria de algo para beber?';\n\n        const _options = [];\n        _options.push({ text: 'Sim', data: 'beverage_yes', event: 'ORDER_CONFIRM_BEVERAGE' });\n        _options.push({ text: 'Não', data: 'beverage_no', event: 'ORDER_CONFIRM_BEVERAGE' });\n        return {\n            type: 'replies',\n            text: _txt,\n            options: _options,\n        };\n    } else {\n        return showFullOrder(pageId, userId);\n    }\n}\n/**\n *\n * @param {*} pageId\n * @param {*} userId\n * @param {*} multiple\n */\nexport const askForBeverages = async (pageId, userId, multiple) => {\n    await updateOrder({ pageId, userId, waitingFor: 'beverage', noBeverage: false });\n\n    const beveragesArr = await getBeverages(pageId);\n    let _rangeIni = (multiple - 1) * 4;\n    let _rangeEnd = multiple * 4;\n\n    const _options = [];\n    for (let i = _rangeIni; i < _rangeEnd; i++) {\n        if (beveragesArr[i]) {\n            const _bev = beveragesArr[i];\n            const _data = { id: _bev.id, beverage: _bev.name, price: _bev.price }\n            const buttons = { text: 'Quero', data: _data, event: 'ORDER_BEVERAGE' };\n\n            let _subtext = _bev.kind;\n            if (_bev.price) {\n                _subtext = _subtext.concat('\\n R$', _bev.price);\n            }\n            _options.push({ text: _bev.name, subtext: _subtext, buttons });\n        }\n    }\n    if ((beveragesArr.length + 1) > _rangeEnd) {\n        multiple++;\n        const buttonsOpt = {\n            text: '+ Opções',\n            data: { option: 'beverages_more', multiple: multiple },\n            event: 'ORDER_BEVERAGE',\n        };\n        _options.push({\n            text: 'Clique aqui p/ ver + opções',\n            buttons: buttonsOpt,\n            isOnlyButtons: true,\n        });\n    } else {\n        const _data = { option: 'beverages_cancel' }\n        const buttons = { text: 'Sem bebida', data: _data, event: 'ORDER_BEVERAGE' };\n        let _subtext = 'Se não encontrou, selecione \"Sem bebida\"';\n        _options.push({ text: 'Sem bebida', subtext: _subtext, buttons });\n    }\n\n    return {\n        type: 'fulllist',\n        text: 'Selecione uma bebida:',\n        options: _options,\n    };\n}\n\n/**\n * Show that user did not want beverage and update order with this info.\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showNoBeverage = async (pageId, userId, data) => {\n    await updateOrder({ pageId, userId, noBeverage: true, waitingFor: 'confirm' });\n\n    return { type: 'text', text: '❌ ' + ' Sem bebida para o seu pedido. ' };\n}\n\n/**\n * Show the chosen beverage.\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showBeverage = async (pageId, userId, data) => {\n    await updateOrder({ pageId, userId, beverageId: data.id, beveragePrice: data.price, completeItem: true, noBeverage: false, waitingFor: 'full_confirmation', calcTotal: true });\n\n    return {\n        type: 'text',\n        text: '✅ ' + '1 Bebida: ' + data.beverage,\n    }\n}\n\n/**\n * Used on Whatsapp\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showBeverageAskForPaymentType = async (pageId, userId, data) => {\n    const prevAnswer = await showBeverage(pageId, userId, data);\n    const nextQuestion = await askForPaymentType(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n/**\n * Used on Whatsapp\n * @param {*} pageId\n * @param {*} userId\n * @param {*} data\n */\nexport const showNoBeverageAskForPaymentType = async (pageId, userId, data) => {\n    const prevAnswer = await showNoBeverage(pageId, userId, data);\n    const nextQuestion = await askForPaymentType(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n/**\n * Cancel the selected item, reorder the itemIds and askForSize\n * @param {*} pageId\n * @param {*} userId\n * @param {*} itemId\n */\nexport const changeItem = async (pageId, userId, itemId) => {\n    const po = await getOrderPending({ pageId, userId, isComplete: false });\n    const result1 = await deleteItem(pageId, po.order.id, itemId);\n    if (result1) {\n        // result2 is the number of items\n        const newItemsNumber = await reorderItems(pageId, po.order.id);\n        if (newItemsNumber) {\n            const _currentItem = newItemsNumber;\n            const _qty = newItemsNumber;\n\n            await updateOrder({\n                pageId, userId, waitingFor: 'size',\n                qty: _qty, currentItem: _currentItem, eraseSplit: true,\n            });\n\n            return await askForSize(pageId, userId);\n        }\n    }\n}\n\nexport const cancelItem = async (pageId, userId, item) => {\n    const po = await getOrderPending({ pageId, userId, isComplete: false });\n    const result1 = await deleteItem(pageId, po.order.id, item.itemId);\n    console.info('cancelItem:', result1);\n    // if (result1) {\n    if (po.order.backToConfirmation === 'full_confirmation') {\n        return await showFullOrder(pageId, userId);\n    } else\n        return await showPartialOrder(pageId, userId);\n    // }\n}\n\n\nexport const updateItemAskOptions = async (pageId, userId, item) => {\n    // const item = await updateStatusSpecificItem(objectId, 0);\n    return await askForOptionsToChange(pageId, userId, item);\n}\n\nexport const sendShippingNotification = async (pageId, userId, orderId) => {\n    const { accessToken } = await getOnePageToken(pageId);\n\n    const _txt = 'O seu pedido número ' + orderId + ' acabou de sair para entrega. Bom apetite!';\n\n    const out = new Elements();\n    out.add({ text: _txt });\n    await Bot.send_message_tag(accessToken, userId, out);\n}\n\nexport const sendRejectionNotification = async (pageId, userId, orderId, rejectionExplanation) => {\n    const { accessToken } = await getOnePageToken(pageId);\n\n    const _txt = 'Infelizmente não poderemos atender o seu pedido número '\n        + orderId\n        + '. Segue o motivo: '\n        + rejectionExplanation;\n\n    const out = new Elements();\n    out.add({ text: _txt });\n    await Bot.send_message_tag(accessToken, userId, out);\n}\n\n/**\n * Delete the pending order and shows the Main Menu.\n * @param {*} pageId\n * @param {*} userId\n */\nexport const cancelPendingOrder = async (pageId, userId) => {\n    await cancelOrder({ pageId, userId });\n\n    const out = await sendMainMenu();\n    out.text = '❌ Pedido Cancelado!' + '\\n\\n' + out.text;\n\n    return out;\n}\n\nexport const showDeliverAskForCategory = async (pageId, userId, data, user, source) => {\n    const prevAnswer = await showDeliver(pageId, userId, data, user, source);\n    const nextQuestion = await askForCategory(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n\nexport const showAddressAskForCategory = async (pageId, userId, addrData, source) => {\n    const prevAnswer = await showAddress(pageId, userId, addrData, source);\n    const nextQuestion = await askForCategory(pageId, userId);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\n/**\n * \n * @param {*} pageId\n * @param {*} userId\n * @param {*} split: if true, only show categories that are marked 'is_pizza'.\n * Show only categories with split to allow user mix categories in same pizza.\n */\nexport const askForCategory = async (pageId, userId, split) => {\n    await updateOrder({ pageId, userId, waitingFor: 'category', waitingForData: split });\n\n    const categories = await getCategories(pageId);\n\n    let _txt = '';\n    if (split) {\n        _txt = `Para escolher o ${split}o. sabor, escolha a categoria:\\n`\n    } else {\n        _txt = 'Selecione uma categoria:';\n    }\n\n    const _options = [];\n    for (let item of categories) {\n        if (split && !item.is_pizza)\n            continue;\n\n        const _data = { id: item.id, name: item.name }\n        const buttons = { text: 'Quero', data: _data, event: 'ORDER_CATEGORY' };\n\n        _options.push({ text: item.name, subtext: item.name, buttons });\n    }\n\n    const buttons = { text: 'Voltar', data: 'partial_confirmation', event: 'ORDER_PARTIAL_CONFIRMATION' };\n    _options.push({ text: 'Voltar para o pedido', subtext: 'Voltar para o pedido', buttons });\n\n    return {\n        type: 'list',\n        text: _txt,\n        options: _options,\n    }\n}\n\nexport const showCategory = async (pageId, userId, data) => {\n    await updateOrder({ pageId, userId, categoryId: data.id, eraseSize: true });\n\n    return {\n        type: 'text',\n        text: '✅ ' + 'Categoria: ' + data.name,\n    }\n}\n\n\nexport const showCategoryAskForSize = async (pageId, userId, data) => {\n    const prevAnswer = await showCategory(pageId, userId, data);\n    const nextQuestion = await askForSizeCat(pageId, userId, data.id);\n\n    nextQuestion.text = prevAnswer.text + '\\n\\n' + nextQuestion.text;\n    return nextQuestion;\n}\n\nexport const askForSizeCat = async (pageId, userId, categoryId) => {\n    const po = await getOrderPending({ pageId, userId, isComplete: false });\n\n    if (!categoryId)\n        categoryId = po.order.currentItemCategory;\n\n    // User is spliting the pizza into more than one category\n    if (po.order.originalSplit > 1 && po.order.currentItemSplit <= po.order.originalSplit) {\n        return askForFlavor(pageId, userId, 1, po);\n    } else {\n\n        const category = await getCategory(pageId, categoryId);\n\n        if (category.price_by_size) {\n\n            // Without await, to run later\n            updateOrder({ pageId, userId, waitingFor: 'size' });\n\n            const _text = 'Selecione o tamanho:';\n\n            const _options = [];\n            const sizesWithPricing = await getPricingSizing(pageId, categoryId); // only sizes with pricing\n            const sizes = await getSizes(pageId, sizesWithPricing);\n\n            for (let i = 0; i < sizes.length; i++) {\n                const _data = { id: sizes[i].id, size: sizes[i].size, split: sizes[i].split };\n                _options.push({ text: sizes[i].size, data: _data, event: 'ORDER_SIZE' });\n            }\n\n            return {\n                type: 'replies',\n                text: _text,\n                options: _options,\n            }\n        } else {\n            return await askForFlavor(pageId, userId, 1);\n        }\n    }\n}\n"],"file":"botController.js"}