{"version":3,"sources":["../../../src/api/controllers/mkt_contact_controller.js"],"names":["updateMktContact","mktData","pageID","userID","last_answer","how_know_company","restaurant_related","restaurant_owner","restaurant_employee","started_test","saw_how_it_works","contact_form","contact_phone","contact_mail","text","final","MktContact","findOne","pageId","userId","exec","mktContact","free_msg","save","console","error","getMktContact"],"mappings":"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","sourcesContent":["import MktContact from '../models/mkt_contact';\n\nexport const updateMktContact = async mktData => {\n    try {\n        const { pageID, userID,\n            last_answer, how_know_company,\n            restaurant_related, restaurant_owner, restaurant_employee,\n            started_test, saw_how_it_works,\n            contact_form, contact_phone, contact_mail,\n            text, final } = mktData;\n        let mktContact = await MktContact.findOne({ pageId: pageID, userId: userID }).exec();\n        if (mktContact) {\n            if (last_answer)\n                mktContact.last_answer = last_answer;\n            if (how_know_company)\n                mktContact.how_know_company = how_know_company;\n            if (typeof restaurant_related === 'boolean')\n                mktContact.restaurant_related = restaurant_related;\n            if (typeof restaurant_owner === 'boolean')\n                mktContact.restaurant_owner = restaurant_owner;\n            if (typeof restaurant_employee === 'boolean')\n                mktContact.restaurant_employee = restaurant_employee;\n            if (contact_form)\n                mktContact.contact_form = contact_form;\n            if (typeof started_test === 'boolean')\n                mktContact.started_test = started_test;\n            if (typeof saw_how_it_works === 'boolean')\n                mktContact.saw_how_it_works = saw_how_it_works;\n            if (contact_phone)\n                mktContact.contact_phone = contact_phone;\n            if (contact_mail)\n                mktContact.contact_mail = contact_mail;\n            if (text)\n                mktContact.free_msg = text;\n            if (typeof final === 'boolean')\n                mktContact.final = final;\n        } else {\n            mktContact = new MktContact({\n                pageId: pageID,\n                userId: userID,\n                last_answer: last_answer,\n                restaurant_related: restaurant_related,\n                restaurant_owner: restaurant_owner,\n                restaurant_employee: restaurant_employee,\n                contact_form: contact_form,\n                contact_phone: contact_phone,\n                contact_mail: contact_mail,\n                free_msg: text,\n                final: final,\n            });\n        }\n        await mktContact.save();\n\n    } catch (err) {\n        console.error({ updateMktContact: err });\n    }\n}\n\nexport const getMktContact = async mktData => {\n    const { pageID, userID } = mktData;\n    return await MktContact.findOne({ userId: userID, pageId: pageID }).exec();\n}"],"file":"mkt_contact_controller.js"}