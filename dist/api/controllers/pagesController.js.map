{"version":3,"sources":["../../../src/api/controllers/pagesController.js"],"names":["page_resources_get_all","req","res","sortObj","query","sort","rangeObj","range","options","offset","limit","lean","leanWithId","Page","paginate","err","result","status","json","message","errmsg","setHeader","util","format","total","docs","page_resources_get_one","params","id","findOne","doc","errMsg","page_resources_delete","findOneAndRemove","then","catch","page_update","console","log","body","pageId","record","greetingText","firstResponseText","access_token","accessToken","userID","currentUser","name","save","subscribedApps","response","errorMessage","error","data","User","docFind","activePage","docSave","setFacebookFields","facebookUrl","axios","post","getOnePage","pageID","Promise","resolve","reject","getOnePageData","exec","getAllPages","pageArray","find","map","Object","keys","length","_greeting","headers","get_started","payload","greeting","locale","text","persistent_menu","composer_input_disabled","call_to_actions","title","type","JSON","stringify","event"],"mappings":"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","sourcesContent":["\nimport Page from \"../models/pages\";\nimport User from \"../models/users\";\nimport axios from 'axios';\nimport util from 'util';\nimport { configSortQuery, configRangeQuery } from '../util/util';\n\n// List all flavors\n// TODO: use filters in the query req.query\nexport const page_resources_get_all = async (req, res) => {\n    // Getting the sort from the requisition\n    var sortObj = configSortQuery(req.query.sort);\n    // Getting the range from the requisition\n    var rangeObj = configRangeQuery(req.query.range);\n\n    let options = {\n        offset: rangeObj['offset'],\n        limit: rangeObj['limit'],\n        sort: sortObj,\n        lean: true,\n        leanWithId: false,\n    };\n\n    var query = {};\n\n    Page.paginate(query, options, async (err, result) => {\n        if (err) {\n            res.status(500).json({ message: err.errmsg });\n        } else {\n            res.setHeader('Content-Range', util.format(\"pages %d-%d/%d\", rangeObj['offset'], rangeObj['limit'], result.total));\n            res.status(200).json(result.docs);\n        }\n    });\n};\n\n// List one record by filtering by ID\nexport const page_resources_get_one = (req, res) => {\n    if (req.params && req.params.id) {\n\n        Page.findOne({ id: req.params.id }, (err, doc) => {\n            if (err) {\n                res.status(500).json({ message: err.errMsg });\n            }\n            else {\n                res.status(200).json(doc);\n            }\n        });\n    }\n}\n\n// DELETE\nexport const page_resources_delete = (req, res) => {\n    Page.findOneAndRemove({ id: req.params.id })\n        .then((result) => {\n            res.status(200).json(result);\n        })\n        .catch((err) => {\n            res.status(500).json({ message: err.errmsg });\n        });\n};\n\n\n// Update or create a new page\nexport const page_update = (req, res) => {\n\n    console.log(\"page_update\");\n    console.log(req.body);\n\n    const pageId = req.body.id;\n\n    // Find a page by id\n    Page.findOne({ id: pageId }, (err, doc) => {\n        if (err) { // err !== null\n            res.status(500).json({ message: err.errmsg });\n            return;\n        }\n        var record;\n\n        if (doc) {\n            record = doc;\n            if (req.body.greetingText)\n                record.greetingText = req.body.greetingText;\n            if (req.body.firstResponseText)\n                record.firstResponseText = req.body.firstResponseText;\n            if (req.body.access_token)\n                record.accessToken = req.body.access_token;\n            record.userID = req.currentUser.userID;\n        } else {\n            record = new Page({\n                id: pageId,\n                name: req.body.name,\n                accessToken: req.body.access_token,\n                userID: req.currentUser.userID,\n            });\n        }\n        record.save((err, result) => {\n            if (err) {\n                res.status(500).json({ message: err.errmsg });\n            } else {\n                subscribedApps(result.id, result.accessToken)\n                    .then(response => {\n                        res.status(200).json(result);\n                    }).catch((err) => {\n                        var errorMessage;\n                        if (err.error) errorMessage = err.error;\n                        if (err.response.data)\n                            if (err.response.data.error)\n                                errorMessage = err.response.data.error.message;\n                        console.log(`subscribed_apps catch err: ${errorMessage}`);\n                        res.status(500).json({ message: errorMessage });\n                    });\n            }\n        });\n\n        // update ActivePage for the current user\n        if (req.currentUser) {\n            User.findOne({ userID: req.currentUser.userID }, (err, docFind) => {\n                if (err) {\n                    res.status(500).json({ message: err.errmsg });\n                    return;\n                }\n\n                if (docFind) {\n                    docFind.activePage = pageId;\n                    docFind.save((err, docSave) => {\n                        if (err) {\n                            res.status(500).json({ message: err.errmsg });\n                        }\n                    })\n                }\n            });\n        }\n\n        if (req.body.greetingText && record && record.accessToken) {\n            setFacebookFields(record.id, record.accessToken, req.body.greetingText).then(response => {\n                console.log('PagesController, response from set fields:', response.result);\n            }).catch(err => {\n                if (err.response && err.response.data && err.response.data.error)\n                    console.log(`PagesController, error from set fields: ${err.response.data.error.message}`);\n                else if (err.response)\n                    console.log(err.response);\n            });\n        }\n\n    });\n}\n\n//oauth/access_token?grant_type=fb_exchange_token&client_id=267537643995936&client_secret=1b5307cb418218dc1b0d38568be37340&fb_exchange_token=EAADzUvY8AyABALCKnnO0nQKYa5GqwNwIiOn3ZCiUrvCZCiTHFzBZB0GNim12elB7j4WTqZCpQ4q6doZC9ZAmc3K4u1Dz8cCu3vZA8SRy7OqAewcXbPS00XVhAWWLrNkEqevdN9EGNRu2iGpMjTiQ4cxBrrbFmlATwqZCuP0wiRTaOEDcnh66KZABaVHrykAnaAAqNp5On1TvWHQZDZD\nexport const subscribedApps = async (pageId, accessToken) => {\n\n    // https://graph.facebook.com/v3.1/{page-id}/subscribed_apps?access_token={}\n    const facebookUrl = `https://graph.facebook.com/v3.1/${pageId}/subscribed_apps?access_token=${accessToken}`\n\n    return await axios.post(facebookUrl);\n}\n\n// used in botController.js\nexport const getOnePage = async (pageID) => {\n    let accessToken = '';\n    await Page.findOne({ id: pageID }, (err, result) => {\n        if (err) {\n\n        }\n        else {\n            accessToken = result.accessToken;\n        }\n    });\n    if (accessToken !== '')\n        return Promise.resolve(accessToken);\n    else return Promise.reject();\n}\n\n/**\n * \n * @param {*} pageID \n * @return Page\n */\nexport const getOnePageData = async (pageID) => {\n    return await Page.findOne({ id: pageID }).exec();\n}\n\n\nexport const getAllPages = async () => {\n    let pageArray = [];\n    await Page.find({}, (err, result) => {\n        pageArray = result.map(doc => { return { 'pageID': doc.id, 'accessToken': doc.accessToken, 'name': doc.name } });\n    });\n    console.log(\"into getAllPages: \", Object.keys(pageArray).length);\n    return Promise.resolve(pageArray);\n}\n\nconst setFacebookFields = async (pageId, accessToken, _greeting) => {\n    const facebookUrl = `https://graph.facebook.com/v2.6/me/messenger_profile?access_token=${accessToken}`;\n    return await axios.post(facebookUrl, {\n        headers: { 'Content-Type': 'application/json' },\n        get_started: { payload: 'GET_STARTED' },\n        greeting: [\n            { locale: 'default', text: _greeting },\n            { locale: 'pt_BR', text: _greeting },\n            { locale: 'en_US', text: _greeting },\n        ],\n        persistent_menu: [\n            {\n                locale: 'default',\n                composer_input_disabled: false,\n                call_to_actions: [\n                    {\n                        title: 'Cardápio',\n                        type: 'postback',\n                        payload: JSON.stringify({ data: 'CARDAPIO_PAYLOAD', event: 'MAIN-MENU' })\n                    },\n                    {\n                        title: 'Horários',\n                        type: 'postback',\n                        payload: JSON.stringify({ data: 'HORARIO_PAYLOAD', event: 'MAIN-MENU' })\n                    },\n                    {\n                        title: 'Fazer Pedido',\n                        type: 'postback',\n                        payload: JSON.stringify({ data: 'PEDIDO_PAYLOAD', event: 'MAIN-MENU' })\n                    }\n                ]\n            }\n        ]\n    });\n}\n\n\n"],"file":"pagesController.js"}