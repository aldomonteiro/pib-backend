{"version":3,"sources":["../../../src/api/controllers/systemController.js"],"names":["initialSetup","pageID","dotenv","config","env","process","NODE_ENV","basePageID","DEV_PAGE_BASE_ID","PRD_PAGE_BASE_ID","page","console","info","haveToUpdate","initialSetupFlavors","insertFlavors","initialSetupStores","insertStores","name","initialSetupSizes","insertSizes","initialSetupPricings","insertPricings","initialSetupBeverages","insertBeverages","initialSetupToppings","insertToppings","greetingText","firstResponseText","basePage","save","error","_newRecords","_flavors","docs","Array","element","newRec","Flavor","id","flavor","kind","toppings","pageId","push","length","insertMany","flavorInsertMany","insertFlavorsErr","_sizes","Size","size","slices","split","result","insertSizesErr","_docs","Beverage","price","insertBeveragesErr","Topping","topping","insertToppingsErr","_pricings","Pricing","sizeId","insertPricingsErr","pageName","_stores","Store","hol_is_open","hol_open","hol_close","sun_is_open","mon_is_open","tue_is_open","wed_is_open","thu_is_open","fri_is_open","sat_is_open","sun_open","mon_open","tue_open","wed_open","thu_open","fri_open","sat_open","sun_close","mon_close","tue_close","wed_close","thu_close","fri_close","sat_close","insertStoresErr"],"mappings":"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","sourcesContent":["import Flavor from '../models/flavors';\nimport Size from '../models/sizes';\nimport Beverage from '../models/beverages';\nimport Topping from '../models/toppings';\nimport Store from '../models/stores';\nimport Pricing from '../models/pricings';\nimport { getFlavors } from './flavorsController';\nimport { getSizes } from './sizesController';\nimport { getBeverages } from './beveragesController';\nimport dotenv from \"dotenv\";\nimport { getToppingsFull } from './toppingsController';\nimport { getPricings } from './pricingsController';\nimport { getStores } from './storesController';\nimport { getOnePageData } from './pagesController';\n\nexport const initialSetup = async pageID => {\n    try {\n        dotenv.config();\n\n        const env = process.env.NODE_ENV || 'production';\n        let basePageID = process.env.DEV_PAGE_BASE_ID; // Página do Aldo\n        if (env === 'production')\n            basePageID = process.env.PRD_PAGE_BASE_ID; // Pizzaibot        \n\n        const page = await getOnePageData(pageID);\n\n        console.info(`env:${env}, basePageID:${basePageID}`);\n\n        if (basePageID !== pageID) { // only updates when the page is not the basePage\n\n            let haveToUpdate = false;\n            if (page) {\n                if (!page.initialSetupFlavors) {\n                    page.initialSetupFlavors = await insertFlavors(pageID, basePageID);\n                    haveToUpdate = true;\n                }\n                if (!page.initialSetupStores) {\n                    page.initialSetupStores = await insertStores(pageID, page.name, basePageID);\n                    haveToUpdate = true;\n                }\n                if (!page.initialSetupSizes) {\n                    page.initialSetupSizes = await insertSizes(pageID, basePageID);\n                    haveToUpdate = true;\n                }\n                if (!page.initialSetupPricings) {\n                    page.initialSetupPricings = await insertPricings(pageID, basePageID);\n                    haveToUpdate = true;\n                }\n                if (!page.initialSetupBeverages) {\n                    page.initialSetupBeverages = await insertBeverages(pageID, basePageID);\n                    haveToUpdate = true;\n                }\n                if (!page.initialSetupToppings) {\n                    page.initialSetupToppings = await insertToppings(pageID, basePageID)\n                    haveToUpdate = true;\n                }\n                if (!page.greetingText || !page.firstResponseText) {\n                    const basePage = await getOnePageData(basePageID);\n                    page.greetingText = basePage.greetingText;\n                    page.firstResponseText = basePage.firstResponseText;\n                    haveToUpdate = true;\n                }\n                if (haveToUpdate)\n                    await page.save();\n\n            }\n        }\n        return page;\n    } catch (error) {\n        console.error(\"Error on initial setup\", error);\n    }\n}\n\nconst insertFlavors = async (pageID, basePageID) => {\n    let _newRecords = 0;\n\n    try {\n\n        const _flavors = await getFlavors(basePageID);\n\n        const docs = new Array();\n\n        for (const element of _flavors) {\n            const newRec = new Flavor({\n                id: element.id,\n                flavor: element.flavor,\n                kind: element.kind,\n                toppings: element.toppings,\n                pageId: pageID\n            });\n            docs.push(newRec);\n        }\n\n        if (docs.length > 0) {\n            const flavorInsertMany = await Flavor.insertMany(docs); //=> {\n            console.info({ flavorInsertMany });\n            _newRecords = docs.length;\n        }\n    } catch (insertFlavorsErr) {\n        // ignoring err..\n        console.error({ insertFlavorsErr });\n    }\n\n    return _newRecords;\n}\n\nconst insertSizes = async (pageID, basePageID) => {\n    let _newRecords = 0;\n    try {\n        const _sizes = await getSizes(basePageID);\n\n        const docs = new Array();\n        for (const element of _sizes) {\n            const newRec = new Size({\n                id: element.id,\n                size: element.size,\n                slices: element.slices,\n                split: element.split,\n                pageId: pageID\n            });\n            docs.push(newRec);\n        }\n\n        if (docs.length > 0) {\n            const result = await Size.insertMany(docs);\n            _newRecords = docs.length;\n        }\n    } catch (insertSizesErr) {\n        // ignoring err..\n        console.error({ insertSizesErr });\n    }\n\n    return _newRecords;\n}\n\nconst insertBeverages = async (pageID, basePageID) => {\n    let _newRecords = 0;\n    try {\n        const _docs = await getBeverages(basePageID);\n\n        const docs = new Array();\n        for (const element of _docs) {\n            const newRec = new Beverage({\n                id: element.id,\n                kind: element.kind,\n                name: element.name,\n                price: element.price,\n                pageId: pageID\n            });\n            docs.push(newRec);\n        }\n\n        if (docs.length > 0) {\n            const result = await Beverage.insertMany(docs);\n            _newRecords = docs.length;\n        }\n    } catch (insertBeveragesErr) {\n        // ignoring err..\n        console.error({ insertBeveragesErr });\n    }\n\n    return _newRecords;\n}\n\nconst insertToppings = async (pageID, basePageID) => {\n    let _newRecords = 0;\n\n    try {\n        const _docs = await getToppingsFull(basePageID);\n\n        const docs = new Array();\n        for (const element of _docs) {\n            const newRec = new Topping({\n                id: element.id,\n                topping: element.topping,\n                pageId: pageID\n            });\n            docs.push(newRec);\n        }\n\n        if (docs.length > 0) {\n            const result = await Topping.insertMany(docs);\n            _newRecords = docs.length;\n        }\n    } catch (insertToppingsErr) {\n        // ignoring err..\n        console.error({ insertToppingsErr });\n    }\n\n    return _newRecords;\n}\n\nconst insertPricings = async (pageID, basePageID) => {\n    let _newRecords = 0;\n\n    try {\n        const _pricings = await getPricings(basePageID);\n\n        const docs = new Array();\n        for (const element of _pricings) {\n            const newRec = new Pricing({\n                id: element.id,\n                kind: element.kind,\n                sizeId: element.sizeId,\n                price: element.price,\n                pageId: pageID\n            });\n            docs.push(newRec);\n        }\n\n        if (docs.length > 0) {\n            const result = await Pricing.insertMany(docs);\n            _newRecords = docs.length;\n        }\n    } catch (insertPricingsErr) {\n        // ignoring err..\n        console.error({ insertPricingsErr });\n    }\n    return _newRecords;\n}\n\nconst insertStores = async (pageID, pageName, basePageID) => {\n    let _newRecords = 0;\n    try {\n        const _stores = await getStores(basePageID);\n\n        const docs = new Array();\n        for (const element of _stores) {\n            const newRec = new Store({\n                pageId: pageID,\n                name: pageName,\n                id: element.id,\n                hol_is_open: element.hol_is_open,\n                hol_open: element.hol_open,\n                hol_close: element.hol_close,\n                sun_is_open: element.sun_is_open,\n                mon_is_open: element.mon_is_open,\n                tue_is_open: element.tue_is_open,\n                wed_is_open: element.wed_is_open,\n                thu_is_open: element.thu_is_open,\n                fri_is_open: element.fri_is_open,\n                sat_is_open: element.sat_is_open,\n                sun_open: element.sun_open,\n                mon_open: element.mon_open,\n                tue_open: element.tue_open,\n                wed_open: element.wed_open,\n                thu_open: element.thu_open,\n                fri_open: element.fri_open,\n                sat_open: element.sat_open,\n                sun_close: element.sun_close,\n                mon_close: element.mon_close,\n                tue_close: element.tue_close,\n                wed_close: element.wed_close,\n                thu_close: element.thu_close,\n                fri_close: element.fri_close,\n                sat_close: element.sat_close,\n            });\n            docs.push(newRec);\n        }\n\n        if (docs.length > 0) {\n            const result = await Store.insertMany(docs);\n            _newRecords = docs.length;\n        }\n    } catch (insertStoresErr) {\n        // ignoring err..\n        console.error({ insertStoresErr });\n    }\n\n    return _newRecords;\n}"],"file":"systemController.js"}