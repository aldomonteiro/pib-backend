{"version":3,"sources":["../../../src/api/controllers/webFormsController.js"],"names":["webform_create","req","res","console","log","body","id","WebForm","find","select","sort","limit","exec","lastId","length","newRecord","name","nome","email","phone","whatsapp","obs","origin","save","then","result","status","json","err","message","errmsg"],"mappings":";;;;;;;AAAA;;;;;;;;AAEA;AACO,IAAMA,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1BC,YAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;;AAD0B,iBAEtBJ,GAAG,CAACI,IAFkB;AAAA;AAAA;AAAA;;AAGhBC,YAAAA,EAHgB,GAGTL,GAAG,CAACI,IAHK,CAGhBC,EAHgB;;AAAA,kBAKlB,CAACA,EAAD,IAAOA,EAAE,KAAK,CALI;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAMGC,qBAAQC,IAAR,GAAeC,MAAf,CAAsB,IAAtB,EAA4BC,IAA5B,CAAiC,KAAjC,EAAwCC,KAAxC,CAA8C,CAA9C,EAAiDC,IAAjD,EANH;;AAAA;AAMZC,YAAAA,MANY;AAOlBP,YAAAA,EAAE,GAAG,CAAL;AACA,gBAAIO,MAAM,IAAIA,MAAM,CAACC,MAArB,EACIR,EAAE,GAAGO,MAAM,CAAC,CAAD,CAAN,CAAUP,EAAV,GAAe,CAApB;;AATc;AAYhBS,YAAAA,SAZgB,GAYJ,IAAIR,oBAAJ,CAAY;AAC1BD,cAAAA,EAAE,EAAEA,EADsB;AAE1BU,cAAAA,IAAI,EAAEf,GAAG,CAACI,IAAJ,CAASY,IAFW;AAG1BC,cAAAA,KAAK,EAAEjB,GAAG,CAACI,IAAJ,CAASa,KAHU;AAI1BC,cAAAA,KAAK,EAAElB,GAAG,CAACI,IAAJ,CAASe,QAJU;AAK1BC,cAAAA,GAAG,EAAEpB,GAAG,CAACI,IAAJ,CAASgB,GALY;AAM1BC,cAAAA,MAAM,EAAErB,GAAG,CAACI,IAAJ,CAASiB;AANS,aAAZ,CAZI;AAqBtBP,YAAAA,SAAS,CAACQ,IAAV,GACKC,IADL,CACU,UAACC,MAAD,EAAY;AACdvB,cAAAA,GAAG,CAACwB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,MAArB;AACH,aAHL,WAIW,UAACG,GAAD,EAAS;AACZ1B,cAAAA,GAAG,CAACwB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEE,gBAAAA,OAAO,EAAED,GAAG,CAACE;AAAf,eAArB;AACH,aANL;;AArBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAd9B,cAAc;AAAA;AAAA;AAAA,GAApB","sourcesContent":["import WebForm from '../models/webForms';\n\n// CREATE A NEW RECORD\nexport const webform_create = async (req, res) => {\n    console.log(req.body);\n    if (req.body) {\n        let { id } = req.body;\n\n        if (!id || id === 0) {\n            const lastId = await WebForm.find().select('id').sort('-id').limit(1).exec();\n            id = 1;\n            if (lastId && lastId.length)\n                id = lastId[0].id + 1;\n        }\n\n        const newRecord = new WebForm({\n            id: id,\n            name: req.body.nome,\n            email: req.body.email,\n            phone: req.body.whatsapp,\n            obs: req.body.obs,\n            origin: req.body.origin,\n        });\n\n        newRecord.save()\n            .then((result) => {\n                res.status(200).json(result);\n            })\n            .catch((err) => {\n                res.status(500).json({ message: err.errmsg });\n            });\n    }\n}\n"],"file":"webFormsController.js"}