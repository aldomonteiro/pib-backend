{"version":3,"sources":["../../../src/api/models/users.js"],"names":["Schema","mongoose","schema","userID","type","String","required","name","email","pictureUrl","hasLongLivedToken","Boolean","default","accessToken","facebookCode","shortLivedToken","longLivedToken","expireDate","Date","lastLogin","activePage","timeZone","locationName","role","timestamps","post","doc","console","log","methods","generateJWT","jwt","sign","process","env","JWT_SECRET","toAuthJSON","token","model"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA;AAEA,IAAMA,MAAM,GAAGC,kBAASD,MAAxB;AAEA,IAAME,MAAM,GAAG,IAAIF,MAAJ,CAAW;AACxBG,EAAAA,MAAM,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GADgB;AAExBC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAFkB;AAGxBE,EAAAA,KAAK,EAAE;AAAEJ,IAAAA,IAAI,EAAEC;AAAR,GAHiB;AAIxBI,EAAAA,UAAU,EAAE;AAAEL,IAAAA,IAAI,EAAEC;AAAR,GAJY;AAKxBK,EAAAA,iBAAiB,EAAE;AAAEN,IAAAA,IAAI,EAAEO,OAAR;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GALK;AAMxBC,EAAAA,WAAW,EAAE;AAAET,IAAAA,IAAI,EAAEC;AAAR,GANW;AAOxBS,EAAAA,YAAY,EAAE;AAAEV,IAAAA,IAAI,EAAEC;AAAR,GAPU;AAQxBU,EAAAA,eAAe,EAAE;AAAEX,IAAAA,IAAI,EAAEC;AAAR,GARO;AASxBW,EAAAA,cAAc,EAAE;AAAEZ,IAAAA,IAAI,EAAEC;AAAR,GATQ;AAUxBY,EAAAA,UAAU,EAAE;AAAEb,IAAAA,IAAI,EAAEc;AAAR,GAVY;AAWxBC,EAAAA,SAAS,EAAE;AAAEf,IAAAA,IAAI,EAAEc;AAAR,GAXa;AAYxBE,EAAAA,UAAU,EAAE;AAAEhB,IAAAA,IAAI,EAAEC;AAAR,GAZY;AAaxBgB,EAAAA,QAAQ,EAAE;AAAEjB,IAAAA,IAAI,EAAEC;AAAR,GAbc;AAcxBiB,EAAAA,YAAY,EAAE;AAAElB,IAAAA,IAAI,EAAEC;AAAR,GAdU;AAexBkB,EAAAA,IAAI,EAAE;AAAEnB,IAAAA,IAAI,EAAEC,MAAR;AAAgBO,IAAAA,OAAO,EAAE;AAAzB;AAfkB,CAAX,EAgBZ;AAAEY,EAAAA,UAAU,EAAE;AAAd,CAhBY,CAAf;AAkBAtB,MAAM,CAACuB,IAAP,CAAY,MAAZ,EAAoB,UAAAC,GAAG,EAAI;AACzBC,EAAAA,OAAO,CAACC,GAAR,uCAA2CF,GAAG,CAACvB,MAA/C,oBAA+DuB,GAAG,CAACnB,IAAnE,uBAAoFmB,GAAG,CAAChB,iBAAxF;AACD,CAFD;;AAIAR,MAAM,CAAC2B,OAAP,CAAeC,WAAf,GAA6B,SAASA,WAAT,GAAuB;AAClD,SAAOC,sBAAIC,IAAJ,CACL;AACExB,IAAAA,KAAK,EAAE,KAAKA,KADd;AAEEe,IAAAA,IAAI,EAAE,KAAKA;AAFb,GADK,EAKLU,OAAO,CAACC,GAAR,CAAYC,UALP,CAAP;AAOD,CARD;;AAUAjC,MAAM,CAAC2B,OAAP,CAAeO,UAAf,GAA4B,SAASA,UAAT,GAAsB;AAChD,SAAO;AACL7B,IAAAA,IAAI,EAAE,KAAKA,IADN;AAELC,IAAAA,KAAK,EAAE,KAAKA,KAFP;AAGLY,IAAAA,UAAU,EAAE,KAAKA,UAHZ;AAILP,IAAAA,WAAW,EAAE,KAAKA,WAJb;AAKLwB,IAAAA,KAAK,EAAE,KAAKP,WAAL;AALF,GAAP;AAOD,CARD,C,CAUA;;;eAEe7B,kBAASqC,KAAT,CAAe,OAAf,EAAwBpC,MAAxB,C","sourcesContent":["import mongoose from \"mongoose\";\nimport jwt from \"jsonwebtoken\";\n// import paginate from 'mongoose-paginate';\n\nconst Schema = mongoose.Schema;\n\nconst schema = new Schema({\n  userID: { type: String, required: true },\n  name: { type: String, required: true },\n  email: { type: String },\n  pictureUrl: { type: String },\n  hasLongLivedToken: { type: Boolean, default: false },\n  accessToken: { type: String },\n  facebookCode: { type: String },\n  shortLivedToken: { type: String },\n  longLivedToken: { type: String },\n  expireDate: { type: Date },\n  lastLogin: { type: Date },\n  activePage: { type: String },\n  timeZone: { type: String },\n  locationName: { type: String },\n  role: { type: String, default: \"user\" },\n}, { timestamps: true });\n\nschema.post('save', doc => {\n  console.log(`user has been saved: userID:${doc.userID}, name:${doc.name}, hasLong:${doc.hasLongLivedToken}`);\n});\n\nschema.methods.generateJWT = function generateJWT() {\n  return jwt.sign(\n    {\n      email: this.email,\n      role: this.role,\n    },\n    process.env.JWT_SECRET\n  );\n};\n\nschema.methods.toAuthJSON = function toAuthJSON() {\n  return {\n    name: this.name,\n    email: this.email,\n    activePage: this.activePage,\n    accessToken: this.accessToken,\n    token: this.generateJWT()\n  };\n};\n\n// schema.plugin(paginate);\n\nexport default mongoose.model(\"users\", schema);\n"],"file":"users.js"}