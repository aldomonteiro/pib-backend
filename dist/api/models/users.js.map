{"version":3,"sources":["../../../src/api/models/users.js"],"names":["Schema","mongoose","schema","userID","type","String","required","name","email","pictureUrl","hasLongLivedToken","Boolean","accessToken","facebookCode","shortLivedToken","longLivedToken","expireDate","Date","lastLogin","activePage","timeZone","locationName","role","timestamps","post","doc","console","log","methods","generateJWT","jwt","sign","process","env","JWT_SECRET","toAuthJSON","token","model"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA;AAEA,IAAMA,MAAM,GAAGC,qBAASD,MAAxB;AAEA,IAAME,MAAM,GAAG,IAAIF,MAAJ,CAAW;AACtBG,EAAAA,MAAM,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GADc;AAEtBC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAFgB;AAGtBE,EAAAA,KAAK,EAAE;AAAEJ,IAAAA,IAAI,EAAEC;AAAR,GAHe;AAItBI,EAAAA,UAAU,EAAE;AAAEL,IAAAA,IAAI,EAAEC;AAAR,GAJU;AAKtBK,EAAAA,iBAAiB,EAAE;AAAEN,IAAAA,IAAI,EAAEO,OAAR;AAAiB,eAAS;AAA1B,GALG;AAMtBC,EAAAA,WAAW,EAAE;AAAER,IAAAA,IAAI,EAAEC;AAAR,GANS;AAOtBQ,EAAAA,YAAY,EAAE;AAAET,IAAAA,IAAI,EAAEC;AAAR,GAPQ;AAQtBS,EAAAA,eAAe,EAAE;AAAEV,IAAAA,IAAI,EAAEC;AAAR,GARK;AAStBU,EAAAA,cAAc,EAAE;AAAEX,IAAAA,IAAI,EAAEC;AAAR,GATM;AAUtBW,EAAAA,UAAU,EAAE;AAAEZ,IAAAA,IAAI,EAAEa;AAAR,GAVU;AAWtBC,EAAAA,SAAS,EAAE;AAAEd,IAAAA,IAAI,EAAEa;AAAR,GAXW;AAYtBE,EAAAA,UAAU,EAAE;AAAEf,IAAAA,IAAI,EAAEC;AAAR,GAZU;AAatBe,EAAAA,QAAQ,EAAE;AAAEhB,IAAAA,IAAI,EAAEC;AAAR,GAbY;AActBgB,EAAAA,YAAY,EAAE;AAAEjB,IAAAA,IAAI,EAAEC;AAAR,GAdQ;AAetBiB,EAAAA,IAAI,EAAE;AAAElB,IAAAA,IAAI,EAAEC,MAAR;AAAgB,eAAS;AAAzB;AAfgB,CAAX,EAgBZ;AAAEkB,EAAAA,UAAU,EAAE;AAAd,CAhBY,CAAf;AAkBArB,MAAM,CAACsB,IAAP,CAAY,MAAZ,EAAoB,UAAAC,GAAG,EAAI;AACvBC,EAAAA,OAAO,CAACC,GAAR,uCAA2CF,GAAG,CAACtB,MAA/C,oBAA+DsB,GAAG,CAAClB,IAAnE,uBAAoFkB,GAAG,CAACf,iBAAxF;AACH,CAFD;;AAIAR,MAAM,CAAC0B,OAAP,CAAeC,WAAf,GAA6B,SAASA,WAAT,GAAuB;AAChD,SAAOC,yBAAIC,IAAJ,CACH;AACIvB,IAAAA,KAAK,EAAE,KAAKA,KADhB;AAEIc,IAAAA,IAAI,EAAE,KAAKA;AAFf,GADG,EAKHU,OAAO,CAACC,GAAR,CAAYC,UALT,CAAP;AAOH,CARD;;AAUAhC,MAAM,CAAC0B,OAAP,CAAeO,UAAf,GAA4B,SAASA,UAAT,GAAsB;AAC9C,SAAO;AACH5B,IAAAA,IAAI,EAAE,KAAKA,IADR;AAEHC,IAAAA,KAAK,EAAE,KAAKA,KAFT;AAGHW,IAAAA,UAAU,EAAE,KAAKA,UAHd;AAIHP,IAAAA,WAAW,EAAE,KAAKA,WAJf;AAKHwB,IAAAA,KAAK,EAAE,KAAKP,WAAL;AALJ,GAAP;AAOH,CARD,C,CAUA;;;eAEe5B,qBAASoC,KAAT,CAAe,OAAf,EAAwBnC,MAAxB,C","sourcesContent":["import mongoose from 'mongoose';\nimport jwt from 'jsonwebtoken';\n// import paginate from 'mongoose-paginate';\n\nconst Schema = mongoose.Schema;\n\nconst schema = new Schema({\n    userID: { type: String, required: true },\n    name: { type: String, required: true },\n    email: { type: String },\n    pictureUrl: { type: String },\n    hasLongLivedToken: { type: Boolean, default: false },\n    accessToken: { type: String },\n    facebookCode: { type: String },\n    shortLivedToken: { type: String },\n    longLivedToken: { type: String },\n    expireDate: { type: Date },\n    lastLogin: { type: Date },\n    activePage: { type: String },\n    timeZone: { type: String },\n    locationName: { type: String },\n    role: { type: String, default: 'user' },\n}, { timestamps: true });\n\nschema.post('save', doc => {\n    console.log(`user has been saved: userID:${doc.userID}, name:${doc.name}, hasLong:${doc.hasLongLivedToken}`);\n});\n\nschema.methods.generateJWT = function generateJWT() {\n    return jwt.sign(\n        {\n            email: this.email,\n            role: this.role,\n        },\n        process.env.JWT_SECRET\n    );\n};\n\nschema.methods.toAuthJSON = function toAuthJSON() {\n    return {\n        name: this.name,\n        email: this.email,\n        activePage: this.activePage,\n        accessToken: this.accessToken,\n        token: this.generateJWT(),\n    };\n};\n\n// schema.plugin(paginate);\n\nexport default mongoose.model('users', schema);\n"],"file":"users.js"}