Bot server listening on port 4000
%s: %sms
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335343740,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335343409,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Ok, vou enviar as opções então. Para continuar é só clicar em uma delas' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { attachment: { type: 'template', payload: [Object] } } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335346591,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335346576,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335346615,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335346609,
       read: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335347559,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335347544,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335347696,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335347670,
       read: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335348477,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335348459,
       delivery: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335350847,
  messaging:
   [ { recipient: [Object],
       timestamp: 1545335350847,
       sender: [Object],
       postback: [Object] } ] }
ERROR parsing postback.payload
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335350847,
  standby:
   [ { recipient: [Object],
       timestamp: 1545335350847,
       sender: [Object],
       postback: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Segue o nosso cardápio:\n\n*Tipo:* Tradicional\nGigante - R$ 69.99\nGrande - R$ 49.99\nMédia - R$ 39.99\nPequena - R$ 29.99\n\n*Calabresa*\nCalabresa,Mussarela\n*Frango Com Catupiry*\nCatupiry,Frango,Mussarela\n*Lombo Com Catupiry*\nCatupiry,Lombinho,Mussarela\n*Marguerita*\nManjericão,Mussarela,Tomate\n*Mussarela*\nMussarela\n*Napolitana*\nMussarela,Tomate\n*Pepperoni*\nMussarela,Pepperoni\n*Portuguesa*\nAzeitona,Cebola,Mussarela,Ovos,Presunto,Tomate\n*Quatro Queijos*\nCatupiry,Cheddar,Gorgonzola,Mussarela\n' } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335354357,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335354342,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335354401,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335354386,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335354430,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335354426,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Agora que você viu nosso cardápio, você está pronto para fazer o pedido?',
     quick_replies: [ [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335357256,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335357239,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335357280,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335357265,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335359497,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335359492,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335360593,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335360252,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Para começar, preciso saber aonde você está. Clique no botão abaixo que receberei a sua localização.',
     quick_replies: [ [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335363624,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335363609,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335363674,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335363667,
       read: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335363611,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335363589,
       delivery: [Object] } ] }
this.emit message
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335374283,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335373947,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { attachment: { type: 'template', payload: [Object] } } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335378291,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335378287,
       read: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335378252,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335378238,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335378257,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335378241,
       delivery: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335381041,
  messaging:
   [ { recipient: [Object],
       timestamp: 1545335381041,
       sender: [Object],
       postback: [Object] } ] }
ERROR parsing postback.payload
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335381041,
  standby:
   [ { recipient: [Object],
       timestamp: 1545335381041,
       sender: [Object],
       postback: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { text: 'Ok, entregaremos nesse endereço.' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335383072,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335383056,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335383119,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335383092,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335383137,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335383132,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Pode nos enviar o seu telefone para confirmar o seu pedido? Se não aparecer o seu telefone (ou estiver errado), use a opção digitar.',
     quick_replies: [ [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335384675,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335384661,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335384656,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335384641,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335384701,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335384693,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335386966,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335386452,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Usaremos o número +554184163676 para confirmar o pedido. Agora vou pegar as informações do pedido.' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335389099,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335389082,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335389124,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335389096,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335389235,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335389217,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text: 'Quantas pizzas você quer?',
     quick_replies: [ [Object], [Object], [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335390480,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335390465,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335390500,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335390483,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335390528,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335390523,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335537030,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335536709,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { text: '✅  1 pizza.' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335540119,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335540114,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text: 'Qual o tamanho da pizza?',
     quick_replies: [ [Object], [Object], [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335542393,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335542380,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335543446,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335543441,
       read: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545335543718,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545335543703,
       delivery: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337629439,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337628895,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { text: '✅  Tamanho: Grande' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337632263,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337632248,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337632341,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337632333,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'A pizza Grande pode ser dividida em 2 sabores.\nEscolha quantos sabores você quer:',
     quick_replies: [ [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337634361,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337634345,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337635360,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337635354,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337637692,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337637217,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { text: '✅ 1 Sabor' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337640232,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337640226,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { attachment: { type: 'template', payload: [Object] } } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337645831,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337645814,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337647120,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337647114,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337651055,
  messaging:
   [ { recipient: [Object],
       timestamp: 1545337651055,
       sender: [Object],
       postback: [Object] } ] }
ERROR parsing postback.payload
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337651055,
  standby:
   [ { recipient: [Object],
       timestamp: 1545337651055,
       sender: [Object],
       postback: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { text: '✅  Sabor: Calabresa' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337653902,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337653887,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337653935,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337653922,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Seguem os detalhes do seu pedido:\n*Pedido:* 1\n1 pizza Grande de Calabresa\n*Endereço de entrega:* R. Getúlio Vargas, 261 - Centro, Palotina - PR, 85950-000, Brazil\n*Telefone:* +554184163676\n*Total:* R$ 49.99\nO pedido está correto?',
     quick_replies: [ [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337655947,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337655933,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337655997,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337655992,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337659075,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337658538,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text: 'Gostaria de algo para beber?',
     quick_replies: [ [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337660801,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337660785,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337660832,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337660825,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337662925,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337662575,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { text: '❌  Sem bebida para o seu pedido. ' } }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337664719,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337664695,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337664753,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337664748,
       read: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message:
   { text:
      'Seguem os detalhes do seu pedido:\n*Pedido:* 1\n1 pizza Grande de Calabresa\n*Endereço de entrega:* R. Getúlio Vargas, 261 - Centro, Palotina - PR, 85950-000, Brazil\n*Telefone:* +554184163676\n*Total:* R$ 49.99\nPosso confirmar o pedido?',
     quick_replies: [ [Object], [Object] ] } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337666341,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337666329,
       read: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337666304,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337666287,
       delivery: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_on' }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337671749,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337671408,
       message: [Object] } ] }
{ recipient: { id: '2106559182687668' },
  senderAction: 'typing_off' }
{ recipient: { id: '2106559182687668' },
  message: { text: 'Pedido Confirmado!' } }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337673916,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337673901,
       delivery: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337673944,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337673939,
       read: [Object] } ] }
bot router (req.body.entry[0])
{ id: '269303613154082',
  time: 1545337817247,
  messaging:
   [ { sender: [Object],
       recipient: [Object],
       timestamp: 1545337817192,
       delivery: [Object] } ] }
